import{d as l,e as T,r,j as e}from"./index-D6MMDBiK.js";import{H as E,F as M}from"./Footer-BKaNYoCi.js";import{B as o}from"./Button-Ddz3JBjX.js";const g={getSellerApplications:async a=>{const i=localStorage.getItem("userId")||"admin";return a==="pending"?l.get(`/seller-applications/pending?adminId=${i}`):l.get(`/seller-applications/pending?adminId=${i}`)},approveApplication:async(a,i)=>{const c=localStorage.getItem("userId")||"admin";return l.patch(`/seller-applications/${a}/approve`,{adminId:c,adminNote:i})},rejectApplication:async(a,i)=>{const c=localStorage.getItem("userId")||"admin";return l.patch(`/seller-applications/${a}/reject`,{adminId:c,adminNote:i})},getAdminStats:async()=>l.get("/analytics-rollup/admin-stats"),getPlatformAnalytics:async(a="30d")=>l.get(`/analytics-rollup/platform?period=${a}`),getTrustOverview:async()=>l.get("/trust/overview"),updateTrustScore:async(a,i,c)=>l.patch(`/trust/seller/${a}`,{adjustment:i,reason:c}),getControlTowerStatus:async()=>l.get("/admin-control-tower/status"),getSubscriptionPlans:async()=>l.get("/subscriptions/plans"),getActiveSubscriptions:async()=>l.get("/subscriptions/active")};function V(){T("ADMIN");const[a,i]=r.useState("pending"),[c,u]=r.useState(!1),[D,f]=r.useState(!1),[n,m]=r.useState(null),[x,b]=r.useState(""),[w,v]=r.useState(""),[z,S]=r.useState(!0),[O,h]=r.useState(!1),[q,j]=r.useState(null),[p,N]=r.useState([]),[A,R]=r.useState([]),[C,k]=r.useState([]);r.useEffect(()=>{async function s(){S(!0),j(null);try{const[t,d,y]=await Promise.all([g.getSellerApplications("pending").catch(()=>[]),g.getSellerApplications("approved").catch(()=>[]),g.getSellerApplications("rejected").catch(()=>[])]);N(t),R(d),k(y)}catch(t){console.error("Failed to fetch applications:",t),j("Failed to load seller applications.")}finally{S(!1)}}s()},[]);const I=s=>{m(s),u(!0)},P=s=>{m(s),f(!0)},$=async()=>{if(n){h(!0);try{await g.approveApplication(n,w);const s=p.find(t=>t.id===n);s&&(N(t=>t.filter(d=>d.id!==n)),R(t=>[...t,{...s,status:"approved",approvedDate:new Date().toISOString()}])),u(!1),v(""),m(null)}catch(s){console.error("Failed to approve:",s),j("Failed to approve seller. Please try again.")}finally{h(!1)}}},F=async()=>{if(!(!n||!x.trim())){h(!0);try{await g.rejectApplication(n,x);const s=p.find(t=>t.id===n);s&&(N(t=>t.filter(d=>d.id!==n)),k(t=>[...t,{...s,status:"rejected",rejectionReason:x,rejectedDate:new Date().toISOString()}])),f(!1),b(""),m(null)}catch(s){console.error("Failed to reject:",s),j("Failed to reject seller. Please try again.")}finally{h(!1)}}};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(E,{}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8 animate-fade-in-down",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Seller Approval"}),e.jsx("p",{className:"text-gray-600",children:"Review and approve new seller applications"})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6 animate-fade-in-up",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("i",{className:"ri-information-line text-blue-600 text-xl mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Approval Guidelines"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:"• Verify all required documents are submitted and valid"}),e.jsx("li",{children:"• Check business registration and tax compliance"}),e.jsx("li",{children:"• Review seller experience and product category fit"}),e.jsx("li",{children:"• Ensure contact information is accurate and verifiable"}),e.jsx("li",{children:"• Approved sellers will receive welcome email with onboarding instructions"})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 animate-fade-in-up",style:{animationDelay:"100ms"},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Pending Review"}),e.jsx("p",{className:"text-3xl font-bold text-orange-600",children:p.length})]}),e.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-time-line text-2xl text-orange-600"})})]})}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 animate-fade-in-up",style:{animationDelay:"200ms"},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Approved"}),e.jsx("p",{className:"text-3xl font-bold text-green-600",children:A.length})]}),e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-checkbox-circle-line text-2xl text-green-600"})})]})}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 animate-fade-in-up",style:{animationDelay:"300ms"},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Rejected"}),e.jsx("p",{className:"text-3xl font-bold text-red-600",children:C.length})]}),e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-close-circle-line text-2xl text-red-600"})})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 mb-6 animate-scale-in",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("div",{className:"flex space-x-8 px-6",children:[e.jsxs("button",{onClick:()=>i("pending"),className:`py-4 border-b-2 font-medium text-sm transition-colors cursor-pointer ${a==="pending"?"border-emerald-600 text-emerald-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:["Pending",e.jsx("span",{className:"ml-2 px-2 py-1 bg-orange-100 text-orange-700 text-xs font-semibold rounded-full",children:p.length})]}),e.jsx("button",{onClick:()=>i("approved"),className:`py-4 border-b-2 font-medium text-sm transition-colors cursor-pointer ${a==="approved"?"border-emerald-600 text-emerald-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Approved"}),e.jsx("button",{onClick:()=>i("rejected"),className:`py-4 border-b-2 font-medium text-sm transition-colors cursor-pointer ${a==="rejected"?"border-emerald-600 text-emerald-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Rejected"})]})}),e.jsxs("div",{className:"p-6",children:[a==="pending"&&e.jsx("div",{className:"space-y-6",children:p.map((s,t)=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-6 hover-lift animate-fade-in-up",style:{animationDelay:`${t*100}ms`},children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-1",children:s.name}),e.jsx("p",{className:"text-gray-600",children:s.owner})]}),e.jsx("span",{className:"px-3 py-1 bg-orange-100 text-orange-700 text-sm font-medium rounded-full",children:"Pending"})]}),e.jsx("p",{className:"text-sm text-gray-700 mb-4 bg-gray-50 p-3 rounded-lg",children:s.businessDescription}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx("i",{className:"ri-mail-line mr-2"}),s.email]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx("i",{className:"ri-phone-line mr-2"}),s.phone]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx("i",{className:"ri-store-2-line mr-2"}),s.category]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx("i",{className:"ri-map-pin-line mr-2"}),s.location]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx("i",{className:"ri-calendar-line mr-2"}),"Submitted: ",s.submittedDate]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx("i",{className:"ri-briefcase-line mr-2"}),"Experience: ",s.experience]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Submitted Documents:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.documents.map((d,y)=>e.jsxs("span",{className:"px-3 py-1 bg-green-100 text-green-700 text-sm rounded-full",children:[e.jsx("i",{className:"ri-file-check-line mr-1"}),d]},y))})]}),e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-star-fill text-yellow-400 mr-1"}),e.jsx("span",{className:"font-semibold text-gray-900",children:s.rating}),e.jsx("span",{className:"text-gray-600 ml-1",children:"Previous Rating"})]})})]}),e.jsxs("div",{className:"flex flex-col gap-3 lg:w-48",children:[e.jsxs(o,{onClick:()=>I(s.id),className:"w-full bg-green-600 hover:bg-green-700 text-white whitespace-nowrap",children:[e.jsx("i",{className:"ri-checkbox-circle-line mr-2"}),"Approve"]}),e.jsxs(o,{onClick:()=>P(s.id),variant:"outline",className:"w-full border-red-600 text-red-600 hover:bg-red-50 whitespace-nowrap",children:[e.jsx("i",{className:"ri-close-circle-line mr-2"}),"Reject"]}),e.jsxs(o,{variant:"outline",className:"w-full whitespace-nowrap",children:[e.jsx("i",{className:"ri-eye-line mr-2"}),"View Details"]})]})]})},s.id))}),a==="approved"&&e.jsx("div",{className:"space-y-4",children:A.map((s,t)=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-6 hover-lift animate-fade-in-up",style:{animationDelay:`${t*100}ms`},children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:s.name}),e.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-700 text-sm font-medium rounded-full",children:"Approved"})]}),e.jsx("p",{className:"text-gray-600 mb-3",children:s.owner}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Category"}),e.jsx("p",{className:"font-medium text-gray-900",children:s.category})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Location"}),e.jsx("p",{className:"font-medium text-gray-900",children:s.location})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Total Sales"}),e.jsx("p",{className:"font-medium text-green-600",children:s.totalSales})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Products"}),e.jsx("p",{className:"font-medium text-gray-900",children:s.products})]})]})]})})},s.id))}),a==="rejected"&&e.jsx("div",{className:"space-y-4",children:C.map((s,t)=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-6 hover-lift animate-fade-in-up",style:{animationDelay:`${t*100}ms`},children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:s.name}),e.jsx("span",{className:"px-3 py-1 bg-red-100 text-red-700 text-sm font-medium rounded-full",children:"Rejected"})]}),e.jsx("p",{className:"text-gray-600 mb-3",children:s.owner}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 text-sm mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Category"}),e.jsx("p",{className:"font-medium text-gray-900",children:s.category})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Location"}),e.jsx("p",{className:"font-medium text-gray-900",children:s.location})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Rejected Date"}),e.jsx("p",{className:"font-medium text-gray-900",children:s.rejectedDate})]})]}),e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-red-800",children:[e.jsx("strong",{children:"Reason:"})," ",s.rejectionReason]})})]})})},s.id))})]})]})]}),c&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6 animate-scale-in",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx("i",{className:"ri-checkbox-circle-line text-2xl text-green-600"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Approve Seller"})]}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Are you sure you want to approve this seller? They will receive a welcome email with onboarding instructions."}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Approval Note (Optional)"}),e.jsx("textarea",{value:w,onChange:s=>v(s.target.value),placeholder:"Add any notes or special instructions...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 resize-none",rows:3})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(o,{onClick:$,className:"flex-1 bg-green-600 hover:bg-green-700 text-white whitespace-nowrap",children:"Confirm Approval"}),e.jsx(o,{onClick:()=>{u(!1),v(""),m(null)},variant:"outline",className:"flex-1 whitespace-nowrap",children:"Cancel"})]})]})}),D&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6 animate-scale-in",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx("i",{className:"ri-close-circle-line text-2xl text-red-600"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Reject Seller"})]}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Please provide a reason for rejection. The seller will be notified via email."}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Rejection Reason ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("textarea",{value:x,onChange:s=>b(s.target.value),placeholder:"Explain why this application is being rejected...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 resize-none",rows:4,required:!0})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(o,{onClick:F,disabled:!x.trim(),className:"flex-1 bg-red-600 hover:bg-red-700 text-white whitespace-nowrap disabled:bg-gray-300",children:"Confirm Rejection"}),e.jsx(o,{onClick:()=>{f(!1),b(""),m(null)},variant:"outline",className:"flex-1 whitespace-nowrap",children:"Cancel"})]})]})}),e.jsx(M,{})]})}export{V as default};
//# sourceMappingURL=page-CAL7-QU_.js.map
