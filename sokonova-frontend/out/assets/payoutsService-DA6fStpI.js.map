{"version":3,"file":"payoutsService-DA6fStpI.js","sources":["../../src/lib/services/payoutsService.ts"],"sourcesContent":["// Payouts Service - API integration for seller payouts\n\nimport api from '../api';\n\ninterface PayoutSummary {\n    pending: number;\n    available: number;\n    totalPaidOut: number;\n}\n\ninterface PayoutHistory {\n    id: string;\n    amount: number;\n    currency: string;\n    status: string;\n    createdAt: string;\n    paidAt: string | null;\n    method: string;\n}\n\nexport const payoutsService = {\n    /**\n     * Get payout summary for seller\n     * GET /payouts/seller/pending\n     * GET /payouts/seller/all\n     */\n    getSummary: async (sellerId?: string): Promise<PayoutSummary> => {\n        const sellerQuery = sellerId ? `?sellerId=${sellerId}` : '';\n        const [pending, all] = await Promise.all([\n            api.get<{\n                totalNet: number;\n            }>(`/payouts/seller/pending${sellerQuery}`),\n            api.get<Array<{ netAmount: number; payoutStatus: string }>>(`/payouts/seller/all${sellerQuery}`),\n        ]);\n\n        const totalPaidOut = all\n            .filter((item) => item.payoutStatus === 'PAID_OUT')\n            .reduce((sum, item) => sum + Number(item.netAmount || 0), 0);\n\n        return {\n            pending: Number(pending.totalNet || 0),\n            available: 0,\n            totalPaidOut,\n        };\n    },\n\n    /**\n     * Get payout history\n     * GET /payouts/seller/all\n     */\n    getHistory: async (sellerId?: string, limit: number = 20): Promise<PayoutHistory[]> => {\n        const sellerQuery = sellerId ? `?sellerId=${sellerId}` : '';\n        const items = await api.get<Array<{\n            id: string;\n            netAmount: number;\n            currency: string;\n            payoutStatus: string;\n            createdAt: string;\n            paidAt: string | null;\n        }>>(`/payouts/seller/all${sellerQuery}`);\n\n        return items.slice(0, limit).map((item) => ({\n            id: item.id,\n            amount: Number(item.netAmount),\n            currency: item.currency,\n            status: item.payoutStatus?.toLowerCase() || 'pending',\n            createdAt: item.createdAt,\n            paidAt: item.paidAt,\n            method: 'Bank Transfer',\n        }));\n    },\n\n    /**\n     * Request a payout\n     * POST /payouts/seller/:sellerId/request\n     */\n    requestPayout: async (sellerId: string, amount: number, method: string): Promise<{ id: string; status: string }> => {\n        return api.post(`/payouts/seller/${sellerId}/request`, { amount, method });\n    },\n\n    /**\n     * Get pending earnings breakdown\n     * GET /payouts/seller/pending\n     */\n    getPendingEarnings: async (sellerId?: string): Promise<unknown[]> => {\n        const sellerQuery = sellerId ? `?sellerId=${sellerId}` : '';\n        return api.get<unknown[]>(`/payouts/seller/pending${sellerQuery}`);\n    },\n};\n\nexport default payoutsService;\n"],"names":["payoutsService","sellerId","sellerQuery","pending","all","api","totalPaidOut","item","sum","limit","amount","method"],"mappings":"wCAoBO,MAAMA,EAAiB,CAM1B,WAAY,MAAOC,GAA8C,CAC7D,MAAMC,EAAcD,EAAW,aAAaA,CAAQ,GAAK,GACnD,CAACE,EAASC,CAAG,EAAI,MAAM,QAAQ,IAAI,CACrCC,EAAI,IAED,0BAA0BH,CAAW,EAAE,EAC1CG,EAAI,IAAwD,sBAAsBH,CAAW,EAAE,CAAA,CAClG,EAEKI,EAAeF,EAChB,OAAQG,GAASA,EAAK,eAAiB,UAAU,EACjD,OAAO,CAACC,EAAKD,IAASC,EAAM,OAAOD,EAAK,WAAa,CAAC,EAAG,CAAC,EAE/D,MAAO,CACH,QAAS,OAAOJ,EAAQ,UAAY,CAAC,EACrC,UAAW,EACX,aAAAG,CAAA,CAER,EAMA,WAAY,MAAOL,EAAmBQ,EAAgB,KAAiC,CACnF,MAAMP,EAAcD,EAAW,aAAaA,CAAQ,GAAK,GAUzD,OATc,MAAMI,EAAI,IAOpB,sBAAsBH,CAAW,EAAE,GAE1B,MAAM,EAAGO,CAAK,EAAE,IAAKF,IAAU,CACxC,GAAIA,EAAK,GACT,OAAQ,OAAOA,EAAK,SAAS,EAC7B,SAAUA,EAAK,SACf,OAAQA,EAAK,cAAc,YAAA,GAAiB,UAC5C,UAAWA,EAAK,UAChB,OAAQA,EAAK,OACb,OAAQ,eAAA,EACV,CACN,EAMA,cAAe,MAAON,EAAkBS,EAAgBC,IAC7CN,EAAI,KAAK,mBAAmBJ,CAAQ,WAAY,CAAE,OAAAS,EAAQ,OAAAC,EAAQ,EAO7E,mBAAoB,MAAOV,GAA0C,CACjE,MAAMC,EAAcD,EAAW,aAAaA,CAAQ,GAAK,GACzD,OAAOI,EAAI,IAAe,0BAA0BH,CAAW,EAAE,CACrE,CACJ"}