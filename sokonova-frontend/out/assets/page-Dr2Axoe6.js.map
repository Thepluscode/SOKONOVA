{"version":3,"file":"page-Dr2Axoe6.js","sources":["../../src/pages/seller-dashboard/orders/page.tsx"],"sourcesContent":["import { useEffect, useMemo, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport Header from '../../../components/feature/Header';\nimport Footer from '../../../components/feature/Footer';\nimport Button from '../../../components/base/Button';\nimport Input from '../../../components/base/Input';\nimport { useToast } from '../../../contexts/ToastContext';\nimport { fulfillmentService, ordersService } from '../../../lib/services';\nimport { useAuth, useRequireAuth } from '../../../lib/auth';\n\ninterface OrderItemRow {\n  id: string;\n  name: string;\n  quantity: number;\n  price: number;\n  image: string;\n  status: string;\n  trackingNumber?: string | null;\n  carrier?: string | null;\n}\n\ninterface OrderRow {\n  id: string;\n  customer: {\n    name: string;\n    email: string;\n    avatar: string;\n  };\n  items: OrderItemRow[];\n  total: number;\n  status: string;\n  paymentStatus: string;\n  shippingAddress: string;\n  orderDate: string;\n  estimatedDelivery?: string;\n  trackingNumber?: string | null;\n}\n\nconst getDerivedStatus = (items: OrderItemRow[]) => {\n  const statuses = items.map((item) => item.status);\n  if (statuses.every((status) => status === 'delivered')) return 'delivered';\n  if (statuses.some((status) => status === 'shipped')) return 'shipped';\n  if (statuses.some((status) => status === 'processing')) return 'processing';\n  return 'pending';\n};\n\nconst fallbackAvatar = (seed: string) =>\n  `https://api.dicebear.com/8.x/initials/svg?seed=${encodeURIComponent(seed)}`;\n\nexport default function OrderManagement() {\n  const { user } = useAuth();\n  useRequireAuth('SELLER');\n\n  const [activeTab, setActiveTab] = useState('all');\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedOrders, setSelectedOrders] = useState<string[]>([]);\n  const [orders, setOrders] = useState<OrderRow[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [actingOnItem, setActingOnItem] = useState<string | null>(null);\n  const { showToast } = useToast();\n\n  useEffect(() => {\n    async function fetchOrders() {\n      setLoading(true);\n      setError(null);\n\n      try {\n        const response = await ordersService.listForSeller();\n        const mapped = response.map((order: any) => {\n          const items = (order.items || []).map((item: any) => ({\n            id: item.id,\n            name: item.product?.title || 'Product',\n            quantity: item.qty || 0,\n            price: Number(item.price || 0),\n            image: item.product?.imageUrl || '',\n            status: item.fulfillmentStatus?.toLowerCase() || 'pending',\n            trackingNumber: item.trackingCode || null,\n            carrier: item.carrier || null,\n          }));\n\n          const customerName = order.user?.name || order.user?.email || 'Buyer';\n          const status = getDerivedStatus(items);\n\n          return {\n            id: order.id,\n            customer: {\n              name: customerName,\n              email: order.user?.email || 'buyer@email.com',\n              avatar: fallbackAvatar(customerName),\n            },\n            items,\n            total: Number(order.total || 0),\n            status,\n            paymentStatus: (order.status || 'pending').toLowerCase() === 'paid' ? 'paid' : 'pending',\n            shippingAddress: order.shippingAdr || 'Shipping address not provided',\n            orderDate: order.createdAt,\n          } as OrderRow;\n        });\n\n        setOrders(mapped);\n      } catch (fetchError) {\n        console.error('Failed to load seller orders:', fetchError);\n        setError('Could not load orders. Please try again.');\n      } finally {\n        setLoading(false);\n      }\n    }\n\n    fetchOrders();\n  }, []);\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'pending':\n        return 'text-yellow-600 bg-yellow-100';\n      case 'processing':\n        return 'text-blue-600 bg-blue-100';\n      case 'shipped':\n        return 'text-purple-600 bg-purple-100';\n      case 'delivered':\n        return 'text-green-600 bg-green-100';\n      case 'cancelled':\n        return 'text-red-600 bg-red-100';\n      default:\n        return 'text-gray-600 bg-gray-100';\n    }\n  };\n\n  const getPaymentStatusColor = (status: string) => {\n    switch (status) {\n      case 'paid':\n        return 'text-green-600 bg-green-100';\n      case 'pending':\n        return 'text-yellow-600 bg-yellow-100';\n      case 'failed':\n        return 'text-red-600 bg-red-100';\n      default:\n        return 'text-gray-600 bg-gray-100';\n    }\n  };\n\n  const filteredOrders = useMemo(() => {\n    return orders.filter((order) => {\n      const matchesSearch =\n        order.id.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        order.customer.name.toLowerCase().includes(searchTerm.toLowerCase());\n      const matchesTab = activeTab === 'all' || order.status === activeTab;\n      return matchesSearch && matchesTab;\n    });\n  }, [orders, searchTerm, activeTab]);\n\n  const handleOrderSelect = (orderId: string) => {\n    setSelectedOrders((prev) =>\n      prev.includes(orderId)\n        ? prev.filter((id) => id !== orderId)\n        : [...prev, orderId],\n    );\n  };\n\n  const handleBulkAction = (action: string) => {\n    console.log(`Bulk action: ${action} for orders:`, selectedOrders);\n    setSelectedOrders([]);\n  };\n\n  const updateItem = (orderId: string, itemId: string, updates: Partial<OrderItemRow>) => {\n    setOrders((prev) =>\n      prev.map((order) => {\n        if (order.id !== orderId) return order;\n        const updatedItems = order.items.map((item) =>\n          item.id === itemId ? { ...item, ...updates } : item,\n        );\n        return { ...order, items: updatedItems, status: getDerivedStatus(updatedItems) };\n      }),\n    );\n  };\n\n  const handleShipItem = async (orderId: string, itemId: string) => {\n    if (!user?.id) return;\n\n    const carrier = prompt('Enter carrier (e.g. DHL, FedEx):') || '';\n    const trackingCode = prompt('Enter tracking number:') || '';\n\n    if (!trackingCode.trim()) {\n      showToast({\n        message: 'Tracking number is required to mark as shipped.',\n        type: 'warning',\n      });\n      return;\n    }\n\n    setActingOnItem(itemId);\n    try {\n      await fulfillmentService.markShipped(itemId, { carrier, trackingCode });\n      updateItem(orderId, itemId, {\n        status: 'shipped',\n        trackingNumber: trackingCode,\n        carrier: carrier || 'Carrier',\n      });\n    } catch (shipError) {\n      console.error('Failed to mark item shipped:', shipError);\n      showToast({\n        message: 'Could not mark item as shipped. Please try again.',\n        type: 'error',\n      });\n    } finally {\n      setActingOnItem(null);\n    }\n  };\n\n  const handleDeliverItem = async (orderId: string, itemId: string) => {\n    if (!user?.id) return;\n\n    const proofUrl = prompt('Optional: paste delivery proof URL') || '';\n\n    setActingOnItem(itemId);\n    try {\n      await fulfillmentService.markDelivered(itemId, { proofUrl });\n      updateItem(orderId, itemId, { status: 'delivered' });\n    } catch (deliverError) {\n      console.error('Failed to mark item delivered:', deliverError);\n      showToast({\n        message: 'Could not mark item as delivered. Please try again.',\n        type: 'error',\n      });\n    } finally {\n      setActingOnItem(null);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50\">\n        <Header />\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12\">\n          <p className=\"text-gray-600\">Loading orders...</p>\n        </div>\n        <Footer />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <Header />\n\n      {/* Page Header */}\n      <div className=\"bg-white border-b border-gray-200\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-4\">\n              <Link\n                to=\"/seller-dashboard\"\n                className=\"text-gray-600 hover:text-gray-900\"\n              >\n                <i className=\"ri-arrow-left-line text-xl\"></i>\n              </Link>\n              <div>\n                <h1 className=\"text-2xl font-bold text-gray-900\">Order Management</h1>\n                <p className=\"text-gray-600 mt-1\">Manage and track all your orders</p>\n              </div>\n            </div>\n            <div className=\"flex items-center space-x-4\">\n              {selectedOrders.length > 0 && (\n                <div className=\"flex items-center space-x-2\">\n                  <span className=\"text-sm text-gray-600\">{selectedOrders.length} selected</span>\n                  <Button\n                    variant=\"outline\"\n                    onClick={() => handleBulkAction('mark_shipped')}\n                  >\n                    Mark as Shipped\n                  </Button>\n                  <Button\n                    variant=\"outline\"\n                    onClick={() => handleBulkAction('export')}\n                  >\n                    Export\n                  </Button>\n                </div>\n              )}\n              <Button variant=\"outline\">\n                <i className=\"ri-download-line mr-2\"></i>\n                Export Orders\n              </Button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Filters and Search */}\n      <div className=\"bg-white border-b border-gray-200\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-6\">\n              {[\n                { id: 'all', label: 'All Orders', count: orders.length },\n                { id: 'pending', label: 'Pending', count: orders.filter((o) => o.status === 'pending').length },\n                { id: 'processing', label: 'Processing', count: orders.filter((o) => o.status === 'processing').length },\n                { id: 'shipped', label: 'Shipped', count: orders.filter((o) => o.status === 'shipped').length },\n                { id: 'delivered', label: 'Delivered', count: orders.filter((o) => o.status === 'delivered').length },\n              ].map((tab) => (\n                <button\n                  key={tab.id}\n                  onClick={() => setActiveTab(tab.id)}\n                  className={`px-3 py-2 text-sm font-medium rounded-lg transition-colors ${\n                    activeTab === tab.id\n                      ? 'bg-emerald-100 text-emerald-700'\n                      : 'text-gray-600 hover:bg-gray-100'\n                  }`}\n                >\n                  {tab.label}\n                  <span className=\"ml-2 text-xs\">({tab.count})</span>\n                </button>\n              ))}\n            </div>\n            <div className=\"w-64\">\n              <Input\n                type=\"text\"\n                placeholder=\"Search orders...\"\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n                className=\"w-full\"\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Orders Table */}\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        {error && (\n          <div className=\"mb-6 text-sm text-red-600\">{error}</div>\n        )}\n        <div className=\"bg-white rounded-lg border border-gray-200 overflow-hidden\">\n          <div className=\"overflow-x-auto\">\n            <table className=\"min-w-full divide-y divide-gray-200\">\n              <thead className=\"bg-gray-50\">\n                <tr>\n                  <th className=\"px-6 py-3 text-left\">\n                    <input\n                      type=\"checkbox\"\n                      checked={selectedOrders.length === filteredOrders.length && filteredOrders.length > 0}\n                      onChange={(e) => {\n                        if (e.target.checked) {\n                          setSelectedOrders(filteredOrders.map((o) => o.id));\n                        } else {\n                          setSelectedOrders([]);\n                        }\n                      }}\n                      className=\"w-4 h-4 text-emerald-600 border-gray-300 rounded focus:ring-emerald-500\"\n                    />\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Order\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Customer\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Items\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Total\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Status\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Payment\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Actions\n                  </th>\n                </tr>\n              </thead>\n              <tbody className=\"bg-white divide-y divide-gray-200\">\n                {filteredOrders.map((order) => (\n                  <tr key={order.id} className=\"hover:bg-gray-50\">\n                    <td className=\"px-6 py-4\">\n                      <input\n                        type=\"checkbox\"\n                        checked={selectedOrders.includes(order.id)}\n                        onChange={() => handleOrderSelect(order.id)}\n                        className=\"w-4 h-4 text-emerald-600 border-gray-300 rounded focus:ring-emerald-500\"\n                      />\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <div>\n                        <p className=\"font-medium text-gray-900\">{order.id}</p>\n                        <p className=\"text-sm text-gray-500\">\n                          {new Date(order.orderDate).toLocaleDateString()}\n                        </p>\n                      </div>\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <div className=\"flex items-center space-x-3\">\n                        <img\n                          src={order.customer.avatar}\n                          alt={order.customer.name}\n                          className=\"w-8 h-8 rounded-full object-cover\"\n                        />\n                        <div>\n                          <p className=\"font-medium text-gray-900\">{order.customer.name}</p>\n                          <p className=\"text-sm text-gray-500\">{order.customer.email}</p>\n                        </div>\n                      </div>\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <div className=\"space-y-3\">\n                        {order.items.map((item) => (\n                          <div key={item.id} className=\"flex items-center justify-between\">\n                            <div className=\"flex items-center space-x-2\">\n                              {item.image ? (\n                                <img\n                                  src={item.image}\n                                  alt={item.name}\n                                  className=\"w-8 h-8 rounded object-cover\"\n                                />\n                              ) : (\n                                <div className=\"w-8 h-8 rounded bg-gray-100\" />\n                              )}\n                              <div>\n                                <p className=\"text-sm font-medium text-gray-900\">{item.name}</p>\n                                <p className=\"text-xs text-gray-500\">Qty: {item.quantity}</p>\n                              </div>\n                            </div>\n                            <div className=\"flex items-center space-x-2\">\n                              <span className={`inline-flex px-2 py-1 text-xs font-medium rounded-full ${getStatusColor(item.status)}`}>\n                                {item.status}\n                              </span>\n                              <button\n                                onClick={() => handleShipItem(order.id, item.id)}\n                                className=\"text-blue-600 hover:text-blue-900 text-sm\"\n                                disabled={item.status === 'shipped' || item.status === 'delivered' || actingOnItem === item.id}\n                                title=\"Mark shipped\"\n                              >\n                                <i className=\"ri-truck-line\"></i>\n                              </button>\n                              <button\n                                onClick={() => handleDeliverItem(order.id, item.id)}\n                                className=\"text-green-600 hover:text-green-900 text-sm\"\n                                disabled={item.status !== 'shipped' || actingOnItem === item.id}\n                                title=\"Mark delivered\"\n                              >\n                                <i className=\"ri-check-line\"></i>\n                              </button>\n                            </div>\n                          </div>\n                        ))}\n                      </div>\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <p className=\"font-medium text-gray-900\">${order.total}</p>\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <span className={`inline-flex px-2 py-1 text-xs font-medium rounded-full ${getStatusColor(order.status)}`}>\n                        {order.status}\n                      </span>\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <span className={`inline-flex px-2 py-1 text-xs font-medium rounded-full ${getPaymentStatusColor(order.paymentStatus)}`}>\n                        {order.paymentStatus}\n                      </span>\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <div className=\"flex items-center space-x-2\">\n                        <button className=\"text-gray-600 hover:text-gray-900 text-sm\">\n                          <i className=\"ri-more-line\"></i>\n                        </button>\n                      </div>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n\n          {filteredOrders.length === 0 && (\n            <div className=\"text-center py-12\">\n              <i className=\"ri-shopping-bag-line text-4xl text-gray-400 mb-4\"></i>\n              <p className=\"text-gray-600\">No orders found matching your criteria.</p>\n            </div>\n          )}\n        </div>\n      </div>\n\n      <Footer />\n    </div>\n  );\n}\n"],"names":["getDerivedStatus","items","statuses","item","status","fallbackAvatar","seed","OrderManagement","user","useAuth","useRequireAuth","activeTab","setActiveTab","useState","searchTerm","setSearchTerm","selectedOrders","setSelectedOrders","orders","setOrders","loading","setLoading","error","setError","actingOnItem","setActingOnItem","showToast","useToast","useEffect","fetchOrders","mapped","ordersService","order","customerName","fetchError","getStatusColor","getPaymentStatusColor","filteredOrders","useMemo","matchesSearch","matchesTab","handleOrderSelect","orderId","prev","id","handleBulkAction","action","updateItem","itemId","updates","updatedItems","handleShipItem","carrier","trackingCode","fulfillmentService","shipError","handleDeliverItem","proofUrl","deliverError","jsxs","jsx","Header","Footer","Link","Button","o","tab","Input","e"],"mappings":"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"}