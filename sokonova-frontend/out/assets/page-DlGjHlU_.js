import{c as w,a as S,e as P,r as i,j as e,L as d}from"./index-ZA5ZORNU.js";import{H as b,F as p}from"./Footer-BVlzreGV.js";import{S as R}from"./SkeletonLoader-D9m7szI5.js";import{p as $}from"./productsService-Botvl8AH.js";import{o as k}from"./ordersService-Blzx0c5_.js";import{a as L}from"./analyticsService-C3zpE5Ln.js";import{p as O}from"./payoutsService-DZohuwBZ.js";function H(){w();const{user:l}=S();P("SELLER");const[y,o]=i.useState(!0),[c,x]=i.useState(null),[r,j]=i.useState({totalRevenue:0,totalOrders:0,activeProducts:0,averageRating:0,pendingEarnings:0,availableForPayout:0}),[m,f]=i.useState([]),[g,N]=i.useState([]);i.useEffect(()=>{async function t(){if(l?.id){o(!0),x(null);try{const[a,h,u]=await Promise.all([L.getSellerProfitability(l.id).catch(()=>null),$.list({sellerId:l.id}).catch(()=>[]),O.getSummary(l.id).catch(()=>({pending:0,available:0,totalPaidOut:0}))]);let n=[];try{n=await k.getByUserId(l.id,5)}catch{n=[]}j({totalRevenue:a?.totalRevenue||0,totalOrders:a?.totalOrders||n.length||0,activeProducts:h.length,averageRating:a?.averageRating||4.5,pendingEarnings:u.pending,availableForPayout:u.available}),f(n.slice(0,5).map(s=>({id:s.id,customer:s.buyerName||"Customer",product:s.items?.[0]?.product?.title||"Product",amount:Number(s.total),status:s.status?.toLowerCase()||"pending",date:s.createdAt}))),N(h.slice(0,3).map(s=>({id:s.id,name:s.title,sales:s.soldCount||0,revenue:Number(s.price)*(s.soldCount||0),stock:s.inventory?.quantity||0,image:s.imageUrl||`https://readdy.ai/api/search-image?query=product&width=300&height=300&seq=${s.id}&orientation=squarish`})))}catch(a){console.error("Failed to fetch dashboard data:",a),x("Failed to load dashboard. Please try again.")}finally{o(!1)}}}t()},[l?.id]);const v=t=>{switch(t){case"delivered":return"text-green-600 bg-green-100";case"shipped":return"text-blue-600 bg-blue-100";case"pending":return"text-yellow-600 bg-yellow-100";case"processing":return"text-yellow-600 bg-yellow-100";default:return"text-gray-600 bg-gray-100"}};return y?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[e.jsx(b,{}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Seller Dashboard"}),e.jsx("p",{className:"text-gray-600",children:"Loading your dashboard..."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[1,2,3,4].map(t=>e.jsx(R,{type:"card"},t))})]}),e.jsx(p,{})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[e.jsx(b,{}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8 animate-fade-in-down",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Seller Dashboard"}),e.jsx("p",{className:"text-gray-600",children:"Manage your products, orders, and analytics"})]}),c&&e.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("i",{className:"ri-error-warning-line text-red-500 text-xl"}),e.jsx("p",{className:"text-red-800",children:c})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[{label:"Total Revenue",value:`$${r.totalRevenue.toLocaleString()}`,icon:"ri-money-dollar-circle-line",color:"teal"},{label:"Orders",value:r.totalOrders.toString(),icon:"ri-shopping-bag-line",color:"blue"},{label:"Products",value:r.activeProducts.toString(),icon:"ri-box-3-line",color:"purple"},{label:"Avg. Rating",value:r.averageRating.toFixed(1),icon:"ri-star-line",color:"yellow"}].map((t,a)=>e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 hover-lift card-hover animate-fade-in-up",style:{animationDelay:`${a*100}ms`},children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:`w-12 h-12 rounded-lg bg-${t.color}-100 flex items-center justify-center`,children:e.jsx("i",{className:`${t.icon} text-2xl text-${t.color}-600`})})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-1",children:t.value}),e.jsx("p",{className:"text-sm text-gray-600",children:t.label})]},a))}),e.jsx("div",{className:"bg-gradient-to-r from-teal-600 to-emerald-600 rounded-xl shadow-lg p-6 mb-8 text-white animate-fade-in",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-teal-100 text-sm font-medium",children:"Available for Payout"}),e.jsxs("p",{className:"text-3xl font-bold",children:["$",r.availableForPayout.toLocaleString()]}),e.jsxs("p",{className:"text-teal-100 text-sm mt-1",children:["Pending: $",r.pendingEarnings.toLocaleString()]})]}),e.jsx(d,{to:"/seller-dashboard/payouts",className:"bg-white text-teal-600 px-6 py-3 rounded-lg font-semibold hover:bg-teal-50 transition-all",children:"Request Payout"})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-8 animate-fade-in",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Quick Actions"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{label:"Add Product",icon:"ri-add-circle-line",link:"/seller-dashboard/add-product"},{label:"View Orders",icon:"ri-file-list-3-line",link:"/seller-dashboard/orders"},{label:"Analytics",icon:"ri-line-chart-line",link:"/seller-dashboard/analytics"},{label:"Payouts",icon:"ri-bank-card-line",link:"/seller-dashboard/payouts"}].map((t,a)=>e.jsxs(d,{to:t.link,className:"flex flex-col items-center justify-center p-6 rounded-lg border-2 border-gray-200 hover:border-teal-500 hover:bg-teal-50 transition-all duration-300 hover-lift",children:[e.jsx("i",{className:`${t.icon} text-3xl text-teal-600 mb-2`}),e.jsx("span",{className:"text-sm font-medium text-gray-900 whitespace-nowrap",children:t.label})]},a))})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-8 animate-fade-in-up",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Recent Orders"}),e.jsx(d,{to:"/seller-dashboard/orders",className:"text-teal-600 hover:text-teal-700 font-medium text-sm",children:"View All →"})]}),m.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("i",{className:"ri-shopping-bag-line text-4xl text-gray-300 mb-2"}),e.jsx("p",{className:"text-gray-600",children:"No orders yet"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Order ID"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Customer"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Product"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Amount"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Status"})]})}),e.jsx("tbody",{children:m.map(t=>e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[e.jsxs("td",{className:"py-4 px-4 text-sm font-medium text-gray-900",children:["#",t.id.slice(0,8)]}),e.jsx("td",{className:"py-4 px-4 text-sm text-gray-700",children:t.customer}),e.jsx("td",{className:"py-4 px-4 text-sm text-gray-700",children:t.product}),e.jsxs("td",{className:"py-4 px-4 text-sm font-semibold text-gray-900",children:["$",t.amount.toFixed(2)]}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium capitalize ${v(t.status)}`,children:t.status})})]},t.id))})]})})]}),g.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 animate-fade-in-up",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Your Products"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:g.map(t=>e.jsxs(d,{to:`/products/${t.id}`,className:"flex items-center space-x-4 p-4 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx("img",{src:t.image,alt:t.name,className:"w-16 h-16 rounded-lg object-cover"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:t.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[t.sales," sold · $",t.revenue.toFixed(0)," revenue"]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[t.stock," in stock"]})]})]},t.id))})]})]}),e.jsx(p,{})]})}export{H as default};
//# sourceMappingURL=page-DlGjHlU_.js.map
