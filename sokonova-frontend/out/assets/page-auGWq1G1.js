import{d as C,r as o,j as r,L as x}from"./index-CqGhWzgp.js";import{H as h,F as u,n as l}from"./Footer-oyiSEV0O.js";import{S as A}from"./SkeletonLoader-CIqO0Xmz.js";function $(){const{user:c}=C(),[n,f]=o.useState("all"),[a,i]=o.useState([]),[p,d]=o.useState(!0);o.useEffect(()=>{async function e(){if(!c?.id){d(!1);return}d(!0);try{const t=await l.list();i(t.map(s=>({id:s.id,type:g(s.type),title:s.title||"Notification",message:s.body||s.message||"",time:y(s.createdAt),read:s.readAt!==null,icon:w(s.type),iconColor:N(s.type),orderId:s.data?.orderId})))}catch(t){console.error("Failed to fetch notifications:",t)}finally{d(!1)}}e()},[c?.id]);function y(e){const t=Math.floor((Date.now()-new Date(e).getTime())/1e3);return t<60?"Just now":t<3600?`${Math.floor(t/60)} minutes ago`:t<86400?`${Math.floor(t/3600)} hours ago`:`${Math.floor(t/86400)} days ago`}function g(e){const t=e?.toLowerCase()||"";return t.startsWith("order_")||t==="new_review"?"orders":t.startsWith("payout")||t.startsWith("dispute")?"system":t.includes("promotion")?"promotions":"system"}function w(e){const t=e?.toLowerCase()||"";return t.startsWith("order_")?"ri-truck-line":t.startsWith("payout")?"ri-money-dollar-circle-line":t.startsWith("dispute")?"ri-error-warning-line":t==="new_review"?"ri-star-line":t.includes("promotion")?"ri-fire-line":"ri-notification-line"}function N(e){const t=e?.toLowerCase()||"";return t.startsWith("order_")?"text-emerald-600":t.startsWith("payout")?"text-green-600":t.startsWith("dispute")?"text-red-600":t==="new_review"?"text-amber-600":t.includes("promotion")?"text-orange-600":"text-blue-600"}const j={all:a.length,orders:a.filter(e=>e.type==="orders").length,promotions:a.filter(e=>e.type==="promotions").length,system:a.filter(e=>e.type==="system").length},m=n==="all"?a:a.filter(e=>e.type===n),v=async e=>{try{await l.markRead(e),i(a.map(t=>t.id===e?{...t,read:!0}:t))}catch(t){console.error("Failed to mark as read:",t)}},b=async()=>{try{await l.markAllRead(),i(a.map(e=>({...e,read:!0})))}catch(e){console.error("Failed to mark all as read:",e)}},k=async e=>{try{await l.delete(e),i(a.filter(t=>t.id!==e))}catch(t){console.error("Failed to delete notification:",t)}};return p?r.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[r.jsx(h,{}),r.jsxs("div",{className:"flex-1 max-w-4xl mx-auto w-full px-4 py-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Notifications"}),r.jsx("div",{className:"space-y-3",children:[...Array(5)].map((e,t)=>r.jsx(A,{type:"text"},t))})]}),r.jsx(u,{})]}):r.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[r.jsx(h,{}),r.jsxs("div",{className:"flex-1 max-w-4xl mx-auto w-full px-4 py-8",children:[r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Notifications"}),r.jsx("button",{onClick:b,className:"text-sm text-emerald-600 hover:text-emerald-700 font-medium whitespace-nowrap",children:"Mark all as read"})]}),r.jsx("p",{className:"text-gray-600",children:"Stay updated with your orders and promotions"})]}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 mb-6",children:r.jsx("div",{className:"flex flex-wrap gap-3",children:["all","orders","promotions","system"].map(e=>r.jsxs("button",{onClick:()=>f(e),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors whitespace-nowrap ${n===e?"bg-emerald-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.charAt(0).toUpperCase()+e.slice(1)," (",j[e],")"]},e))})}),r.jsx("div",{className:"space-y-3",children:m.length===0?r.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-12 text-center",children:[r.jsx("i",{className:"ri-notification-off-line text-6xl text-gray-300 mb-4"}),r.jsx("p",{className:"text-gray-500",children:"No notifications in this category."})]}):m.map(e=>r.jsx("div",{className:`bg-white rounded-xl shadow-sm p-4 transition-all hover:shadow-md ${e.read?"":"border-l-4 border-emerald-600"}`,children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center flex-shrink-0",children:r.jsx("i",{className:`${e.icon} text-xl ${e.iconColor}`})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-start justify-between gap-4 mb-1",children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:e.title}),r.jsx("span",{className:"text-xs text-gray-500 whitespace-nowrap",children:e.time})]}),r.jsx("p",{className:"text-sm text-gray-600 mb-3",children:e.message}),r.jsxs("div",{className:"flex items-center gap-4",children:[e.orderId&&r.jsx(x,{to:`/orders/${e.orderId}/tracking`,className:"text-xs text-emerald-600 hover:text-emerald-700 font-medium whitespace-nowrap",children:"View order"}),!e.read&&r.jsx("button",{onClick:()=>v(e.id),className:"text-xs text-emerald-600 hover:text-emerald-700 font-medium whitespace-nowrap",children:"Mark as read"}),r.jsx("button",{onClick:()=>k(e.id),className:"text-xs text-red-600 hover:text-red-700 font-medium whitespace-nowrap",children:"Delete"})]})]})]})},e.id))}),r.jsx("div",{className:"mt-8 text-center",children:r.jsxs(x,{to:"/account/settings/notifications",className:"inline-flex items-center gap-2 text-emerald-600 hover:text-emerald-700 font-medium",children:[r.jsx("i",{className:"ri-settings-3-line"}),"Notification Settings"]})})]}),r.jsx(u,{})]})}export{$ as default};
//# sourceMappingURL=page-auGWq1G1.js.map
