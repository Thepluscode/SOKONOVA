import{c as $,h as A,d as C,r as n,j as e,L as c}from"./index-BuEVh5sI.js";import{H as m,F as o}from"./Footer-BUHV-7DN.js";import{S as x}from"./SkeletonLoader-xTJJaupH.js";import{o as O}from"./ordersService-CeTZsDpa.js";function I(){const[p]=$();A();const{user:i}=C(),l=p.get("orderId")||p.get("order_id"),[a,v]=n.useState(null),[w,h]=n.useState(!0),[g,y]=n.useState(null);n.useEffect(()=>{async function t(){if(!l){h(!1),y("No order ID provided");return}try{const s=await O.get(l),u=(s.items||[]).map(r=>({id:r.id,name:r.product?.title||"Product",price:Number(r.price||0),quantity:r.qty||1,image:r.product?.imageUrl||`https://readdy.ai/api/search-image?query=product&width=80&height=80&seq=${r.id}&orientation=squarish`})),j=u.reduce((r,N)=>r+N.price*N.quantity,0),f=Number(s.shippingCost||0),b=Number(s.tax||0);v({id:s.id,status:s.status,total:Number(s.total||j+f+b),subtotal:j,shipping:f,tax:b,shippingAddress:s.shippingAdr||"Address not provided",items:u,createdAt:s.createdAt,estimatedDelivery:s.estimatedDelivery||D(),buyerEmail:s.user?.email||i?.email})}catch(s){console.error("Failed to fetch order:",s),y("Could not load order details")}finally{h(!1)}}t()},[l,i?.email]);const D=()=>{const t=new Date;return t.setDate(t.getDate()+7),t.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})},S=t=>{if(!t||t==="Address not provided")return{name:i?.name||"Customer",lines:["Address not provided"]};try{const s=JSON.parse(t);return{name:s.name||s.fullName||i?.name||"Customer",lines:[s.street||s.address||s.line1,s.city&&s.state?`${s.city}, ${s.state} ${s.zip||s.postalCode||""}`:"",s.country||""].filter(Boolean)}}catch{return{name:i?.name||"Customer",lines:t.split(",").map(s=>s.trim())}}};if(w)return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[e.jsx(m,{}),e.jsxs("main",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx(x,{type:"avatar"}),e.jsx(x,{type:"text"})]}),e.jsx(x,{type:"card"})]}),e.jsx(o,{})]});if(g||!a)return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[e.jsx(m,{}),e.jsx("main",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-24 h-24 mx-auto mb-6 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx("i",{className:"ri-error-warning-line text-5xl text-red-600"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-3",children:"Order Not Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:g||"We could not find this order."}),e.jsxs(c,{to:"/buyer-orders",className:"inline-flex items-center gap-2 bg-teal-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-teal-700 transition-colors",children:[e.jsx("i",{className:"ri-file-list-line"}),"View My Orders"]})]})}),e.jsx(o,{})]});const d=S(a.shippingAddress);return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[e.jsx(m,{}),e.jsxs("main",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[e.jsxs("div",{className:"text-center mb-8 animate-scale-in",children:[e.jsx("div",{className:"w-24 h-24 mx-auto mb-6 bg-green-100 rounded-full flex items-center justify-center animate-pulse-ring",children:e.jsx("i",{className:"ri-check-line text-5xl text-green-600"})}),e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-3",children:"Order Confirmed!"}),e.jsx("p",{className:"text-lg text-gray-600 mb-2",children:"Thank you for your purchase"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Order #",a.id.slice(0,8).toUpperCase()]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 md:p-8 mb-6 animate-fade-in-up",style:{animationDelay:"200ms"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-6 pb-6 border-b border-gray-200",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:"Order Details"}),e.jsx("p",{className:"text-sm text-gray-600",children:a.buyerEmail?`Confirmation sent to ${a.buyerEmail}`:"Confirmation sent to your email"})]}),e.jsxs("button",{className:"text-teal-600 hover:text-teal-700 font-medium text-sm whitespace-nowrap flex items-center gap-2",children:[e.jsx("i",{className:"ri-download-line"}),"Download Receipt"]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-6 animate-fade-in",style:{animationDelay:"300ms"},children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx("i",{className:"ri-truck-line text-teal-600"}),"Delivery Address"]}),e.jsxs("p",{className:"text-sm text-gray-700 leading-relaxed",children:[d.name,e.jsx("br",{}),d.lines.map((t,s)=>e.jsxs("span",{children:[t,s<d.lines.length-1&&e.jsx("br",{})]},s))]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx("i",{className:"ri-calendar-line text-teal-600"}),"Estimated Delivery"]}),e.jsx("p",{className:"text-sm text-gray-700 mb-2",children:a.estimatedDelivery}),e.jsx("p",{className:"text-xs text-gray-500",children:"You'll receive tracking information via email"})]})]}),e.jsxs("div",{className:"animate-fade-in",style:{animationDelay:"400ms"},children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-4",children:["Order Items (",a.items.length,")"]}),e.jsx("div",{className:"space-y-4",children:a.items.map((t,s)=>e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-50 rounded-lg animate-fade-in",style:{animationDelay:`${500+s*50}ms`},children:[e.jsx("img",{src:t.image,alt:t.name,className:"w-16 h-16 object-cover rounded-lg"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-900 text-sm",children:t.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Qty: ",t.quantity]})]}),e.jsxs("div",{className:"font-semibold text-gray-900",children:["$",(t.price*t.quantity).toFixed(2)]})]},t.id))})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 space-y-2 animate-fade-in",style:{animationDelay:"600ms"},children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Subtotal"}),e.jsxs("span",{className:"text-gray-900",children:["$",a.subtotal.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Shipping"}),e.jsx("span",{className:a.shipping===0?"text-green-600":"text-gray-900",children:a.shipping===0?"Free":`$${a.shipping.toFixed(2)}`})]}),a.tax>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Tax"}),e.jsxs("span",{className:"text-gray-900",children:["$",a.tax.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-lg font-bold pt-2 border-t border-gray-200",children:[e.jsx("span",{className:"text-gray-900",children:"Total"}),e.jsxs("span",{className:"text-gray-900",children:["$",a.total.toFixed(2)]})]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-8 animate-fade-in-up",style:{animationDelay:"700ms"},children:[e.jsxs(c,{to:`/orders/${a.id}/tracking`,className:"w-full bg-teal-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-teal-700 transition-colors whitespace-nowrap ripple-effect flex items-center justify-center gap-2",children:[e.jsx("i",{className:"ri-map-pin-line"}),"Track Order"]}),e.jsxs(c,{to:"/products",className:"w-full bg-white text-gray-900 px-6 py-3 rounded-lg font-semibold border-2 border-gray-300 hover:border-gray-400 transition-colors whitespace-nowrap flex items-center justify-center gap-2",children:[e.jsx("i",{className:"ri-shopping-bag-line"}),"Continue Shopping"]})]}),e.jsx("div",{className:"grid grid-cols-3 gap-4 animate-fade-in-up",style:{animationDelay:"800ms"},children:[{icon:"ri-shield-check-line",text:"Secure Payment",delay:"900ms"},{icon:"ri-refresh-line",text:"Easy Returns",delay:"950ms"},{icon:"ri-customer-service-2-line",text:"24/7 Support",delay:"1000ms"}].map((t,s)=>e.jsxs("div",{className:"text-center p-4 bg-white rounded-lg shadow-sm animate-scale-in",style:{animationDelay:t.delay},children:[e.jsx("i",{className:`${t.icon} text-3xl text-teal-600 mb-2`}),e.jsx("p",{className:"text-xs font-medium text-gray-700",children:t.text})]},s))})]}),e.jsx(o,{})]})}export{I as default};
//# sourceMappingURL=page-C8AwawKt.js.map
