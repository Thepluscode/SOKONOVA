{"version":3,"file":"page-DjTmah50.js","sources":["../../src/pages/discover/page.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport Header from '../../components/feature/Header';\nimport Footer from '../../components/feature/Footer';\nimport SkeletonLoader from '../../components/base/SkeletonLoader';\nimport { productsService, cartService } from '../../lib/services';\nimport { useAuth } from '../../lib/auth';\nimport type { Product } from '../../lib/types';\n\nexport default function Discover() {\n  const navigate = useNavigate();\n  const { user } = useAuth();\n  const [activeTab, setActiveTab] = useState('trending');\n  const [loading, setLoading] = useState(true);\n  const [products, setProducts] = useState<Product[]>([]);\n  const [addingToCart, setAddingToCart] = useState<string | null>(null);\n\n  // Fetch products based on active tab\n  useEffect(() => {\n    async function fetchProducts() {\n      setLoading(true);\n      try {\n        // Fetch products based on tab (API can be extended to support sorting)\n        const apiProducts = await productsService.list({ limit: 12 });\n        setProducts(apiProducts);\n      } catch (err) {\n        console.error('Failed to fetch products:', err);\n      } finally {\n        setLoading(false);\n      }\n    }\n    fetchProducts();\n  }, [activeTab]);\n\n  const handleAddToCart = async (productId: string) => {\n    setAddingToCart(productId);\n    try {\n      if (user?.id) {\n        await cartService.addItem(user.id, productId, 1);\n      } else {\n        // Fallback to localStorage for anonymous users\n        const cart = JSON.parse(localStorage.getItem('cart') || '[]');\n        const existing = cart.find((item: any) => item.productId === productId);\n        if (existing) {\n          existing.quantity += 1;\n        } else {\n          cart.push({ productId, quantity: 1 });\n        }\n        localStorage.setItem('cart', JSON.stringify(cart));\n      }\n    } catch (err) {\n      console.error('Failed to add to cart:', err);\n    } finally {\n      setAddingToCart(null);\n    }\n  };\n\n  const getProductImage = (product: Product, index: number) => {\n    if (product.imageUrl) return product.imageUrl;\n    return `https://readdy.ai/api/search-image?query=modern%20product%20photography%20white%20background&width=400&height=400&seq=discover-${index}&orientation=squarish`;\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100\">\n      <Header />\n\n      <main className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        {/* Hero Section */}\n        <div className=\"text-center mb-12 animate-fade-in-down\">\n          <h1 className=\"text-4xl font-bold text-gray-900 mb-4\">Discover Amazing Products</h1>\n          <p className=\"text-lg text-gray-600 max-w-2xl mx-auto\">\n            Explore trending items, new arrivals, and personalized recommendations just for you\n          </p>\n        </div>\n\n        {/* Category Tabs */}\n        <div className=\"flex justify-center mb-8 animate-fade-in\">\n          <div className=\"inline-flex bg-white rounded-full p-1 shadow-sm\">\n            {[\n              { id: 'trending', label: 'Trending', icon: 'ri-fire-line' },\n              { id: 'new', label: 'New Arrivals', icon: 'ri-sparkle-line' },\n              { id: 'popular', label: 'Popular', icon: 'ri-heart-line' },\n              { id: 'deals', label: 'Best Deals', icon: 'ri-price-tag-3-line' }\n            ].map((tab) => (\n              <button\n                key={tab.id}\n                onClick={() => setActiveTab(tab.id)}\n                className={`px-6 py-3 rounded-full font-medium text-sm transition-all duration-300 whitespace-nowrap flex items-center gap-2 ${activeTab === tab.id\n                  ? 'bg-teal-600 text-white shadow-md'\n                  : 'text-gray-600 hover:text-gray-900'\n                  }`}\n              >\n                <i className={tab.icon}></i>\n                {tab.label}\n              </button>\n            ))}\n          </div>\n        </div>\n\n        {/* Products Grid */}\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-12\">\n          {loading ? (\n            [...Array(8)].map((_, i) => <SkeletonLoader key={i} type=\"card\" />)\n          ) : products.length === 0 ? (\n            <div className=\"col-span-full text-center py-12\">\n              <i className=\"ri-box-3-line text-4xl text-gray-300 mb-4\"></i>\n              <p className=\"text-gray-600\">No products found.</p>\n            </div>\n          ) : (\n            products.map((product, index) => (\n              <div\n                key={product.id}\n                className=\"bg-white rounded-xl shadow-sm overflow-hidden hover-lift card-hover cursor-pointer animate-fade-in-up\"\n                style={{ animationDelay: `${100 + index * 50}ms` }}\n              >\n                <div className=\"relative\" onClick={() => navigate(`/products/${product.id}`)}>\n                  <img\n                    src={getProductImage(product, index)}\n                    alt={product.title}\n                    className=\"w-full h-64 object-cover\"\n                  />\n                  {index % 3 === 0 && (\n                    <div className=\"absolute top-3 left-3 bg-red-500 text-white px-3 py-1 rounded-full text-xs font-bold\">\n                      HOT\n                    </div>\n                  )}\n                  {index % 4 === 0 && (\n                    <div className=\"absolute top-3 right-3 bg-teal-500 text-white px-3 py-1 rounded-full text-xs font-bold\">\n                      NEW\n                    </div>\n                  )}\n                </div>\n                <div className=\"p-4\">\n                  <h3\n                    className=\"font-semibold text-gray-900 mb-2 line-clamp-2 cursor-pointer hover:text-teal-600\"\n                    onClick={() => navigate(`/products/${product.id}`)}\n                  >\n                    {product.title}\n                  </h3>\n                  <div className=\"flex items-center gap-1 mb-2\">\n                    {[...Array(5)].map((_, i) => (\n                      <i key={i} className={`ri-star-${i < 4 ? 'fill' : 'line'} text-yellow-400 text-sm`}></i>\n                    ))}\n                    <span className=\"text-xs text-gray-500 ml-1\">(4.8)</span>\n                  </div>\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <span className=\"text-xl font-bold text-gray-900\">\n                        ${Number(product.price).toFixed(2)}\n                      </span>\n                    </div>\n                    <button\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        handleAddToCart(product.id);\n                      }}\n                      disabled={addingToCart === product.id}\n                      className=\"w-9 h-9 rounded-full bg-teal-600 text-white flex items-center justify-center hover:bg-teal-700 transition-colors disabled:bg-teal-400\"\n                    >\n                      {addingToCart === product.id ? (\n                        <i className=\"ri-loader-4-line animate-spin\"></i>\n                      ) : (\n                        <i className=\"ri-shopping-cart-line\"></i>\n                      )}\n                    </button>\n                  </div>\n                </div>\n              </div>\n            ))\n          )}\n        </div>\n\n        {/* Personalized Section */}\n        <div className=\"bg-gradient-to-r from-teal-600 to-teal-700 rounded-2xl p-8 text-center text-white mb-12\">\n          <div className=\"animate-float\">\n            <i className=\"ri-magic-line text-5xl mb-4\"></i>\n          </div>\n          <h2 className=\"text-3xl font-bold mb-4\">Get Personalized Recommendations</h2>\n          <p className=\"text-teal-100 mb-6 max-w-2xl mx-auto\">\n            Sign in to see products tailored to your interests and shopping history\n          </p>\n          <button\n            onClick={() => navigate('/discover/personalized')}\n            className=\"bg-white text-teal-600 px-8 py-3 rounded-full font-semibold hover:bg-gray-100 transition-colors\"\n          >\n            View My Recommendations\n          </button>\n        </div>\n\n        {/* Categories Grid */}\n        <div>\n          <h2 className=\"text-2xl font-bold text-gray-900 mb-6\">Shop by Category</h2>\n          <div className=\"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4\">\n            {[\n              { name: 'Electronics', icon: 'ri-smartphone-line', color: 'blue' },\n              { name: 'Fashion', icon: 'ri-shirt-line', color: 'pink' },\n              { name: 'Home', icon: 'ri-home-4-line', color: 'green' },\n              { name: 'Beauty', icon: 'ri-heart-pulse-line', color: 'purple' },\n              { name: 'Sports', icon: 'ri-basketball-line', color: 'orange' },\n              { name: 'Books', icon: 'ri-book-open-line', color: 'indigo' }\n            ].map((category, index) => (\n              <div\n                key={index}\n                onClick={() => navigate(`/products?category=${encodeURIComponent(category.name)}`)}\n                className=\"bg-white rounded-xl p-6 text-center hover-lift card-hover cursor-pointer\"\n              >\n                <div className={`w-16 h-16 mx-auto mb-3 rounded-full bg-${category.color}-100 flex items-center justify-center`}>\n                  <i className={`${category.icon} text-3xl text-${category.color}-600`}></i>\n                </div>\n                <h3 className=\"font-semibold text-gray-900 text-sm\">{category.name}</h3>\n              </div>\n            ))}\n          </div>\n        </div>\n      </main>\n\n      <Footer />\n    </div>\n  );\n}\n"],"names":["Discover","navigate","useNavigate","user","useAuth","activeTab","setActiveTab","useState","loading","setLoading","products","setProducts","addingToCart","setAddingToCart","useEffect","fetchProducts","apiProducts","productsService","err","handleAddToCart","productId","cartService","cart","existing","item","getProductImage","product","index","jsxs","jsx","Header","tab","_","i","SkeletonLoader","e","category","Footer"],"mappings":"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"}