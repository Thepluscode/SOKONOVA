{"version":3,"file":"page-2jwNm5Nt.js","sources":["../../src/lib/services/paymentsService.ts","../../src/components/feature/GuestCheckout.tsx","../../src/components/feature/SavedAddresses.tsx","../../src/pages/checkout/page.tsx"],"sourcesContent":["// Payments Service - API integration for payments module\n\nimport api from '../api';\nimport type { Payment } from '../types';\n\ninterface PaymentIntent {\n    orderId: string;\n    externalRef: string;\n    checkoutUrl?: string;\n    amount: number;\n    currency: string;\n    provider: string;\n}\n\ninterface VerificationResult {\n    status: 'success' | 'failed' | 'pending';\n    message?: string;\n    orderId?: string;\n    amount?: number;\n}\n\nexport const paymentsService = {\n    /**\n     * Create payment intent\n     * POST /payments/intent\n     */\n    createIntent: async (orderId: string, provider: 'flutterwave' | 'paystack' | 'stripe'): Promise<PaymentIntent> => {\n        return api.post<PaymentIntent>('/payments/intent', { orderId, provider });\n    },\n\n    /**\n     * Get payment status for order\n     * GET /payments/:orderId\n     */\n    getStatus: async (orderId: string): Promise<Payment> => {\n        return api.get<Payment>(`/payments/${orderId}`);\n    },\n\n    /**\n     * Poll for payment status (useful after redirect)\n     * Polls every 2 seconds for up to 30 seconds\n     */\n    waitForPayment: async (orderId: string, maxWaitMs: number = 30000): Promise<Payment> => {\n        const startTime = Date.now();\n        const pollInterval = 2000;\n\n        while (Date.now() - startTime < maxWaitMs) {\n            const payment = await paymentsService.getStatus(orderId);\n            if (payment.status === 'SUCCEEDED' || payment.status === 'FAILED') {\n                return payment;\n            }\n            await new Promise(resolve => setTimeout(resolve, pollInterval));\n        }\n\n        // Return current status after timeout\n        return paymentsService.getStatus(orderId);\n    },\n\n    /**\n     * Verify Paystack payment\n     * GET /payments/verify/paystack/:reference\n     */\n    verifyPaystack: async (reference: string): Promise<VerificationResult> => {\n        return api.get<VerificationResult>(`/payments/verify/paystack/${reference}`);\n    },\n\n    /**\n     * Verify Flutterwave payment\n     * GET /payments/verify/flutterwave/:transactionId\n     */\n    verifyFlutterwave: async (transactionId: string): Promise<VerificationResult> => {\n        return api.get<VerificationResult>(`/payments/verify/flutterwave/${transactionId}`);\n    },\n\n    /**\n     * Verify Stripe payment\n     * GET /payments/verify/stripe/:sessionId\n     */\n    verifyStripe: async (sessionId: string): Promise<VerificationResult> => {\n        return api.get<VerificationResult>(`/payments/verify/stripe/${sessionId}`);\n    },\n\n    /**\n     * Get payment history for user\n     * GET /payments/user/:userId\n     */\n    getHistory: async (userId: string, page: number = 1, limit: number = 10): Promise<Payment[]> => {\n        return api.get<Payment[]>(`/payments/user/${userId}?page=${page}&limit=${limit}`);\n    },\n};\n\nexport default paymentsService;\n","import { useState } from 'react';\n\ninterface GuestCheckoutProps {\n  onContinue: (guestInfo: GuestInfo) => void;\n}\n\ninterface GuestInfo {\n  email: string;\n  firstName: string;\n  lastName: string;\n  phone: string;\n}\n\nexport default function GuestCheckout({ onContinue }: GuestCheckoutProps) {\n  const [guestInfo, setGuestInfo] = useState<GuestInfo>({\n    email: '',\n    firstName: '',\n    lastName: '',\n    phone: '',\n  });\n\n  const [errors, setErrors] = useState<Partial<GuestInfo>>({});\n\n  const validateForm = () => {\n    const newErrors: Partial<GuestInfo> = {};\n\n    if (!guestInfo.email) {\n      newErrors.email = 'Email address is required.';\n    } else if (!/\\S+@\\S+\\.\\S+/.test(guestInfo.email)) {\n      newErrors.email = 'Email address is invalid.';\n    }\n\n    if (!guestInfo.firstName) {\n      newErrors.firstName = 'First name is required.';\n    }\n\n    if (!guestInfo.lastName) {\n      newErrors.lastName = 'Last name is required.';\n    }\n\n    if (!guestInfo.phone) {\n      newErrors.phone = 'Phone number is required.';\n    }\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (validateForm()) {\n      onContinue(guestInfo);\n    }\n  };\n\n  return (\n    <div className=\"bg-white rounded-lg border border-gray-200 p-6\">\n      <div className=\"flex items-center gap-3 mb-6\">\n        <div className=\"w-10 h-10 bg-emerald-100 rounded-full flex items-center justify-center\">\n          <i className=\"ri-user-line text-emerald-600 text-xl\"></i>\n        </div>\n        <div>\n          <h2 className=\"text-xl font-bold text-gray-900\">Guest Checkout</h2>\n          <p className=\"text-sm text-gray-600\">No account needed - checkout quickly.</p>\n        </div>\n      </div>\n\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n              First Name <span className=\"text-red-500\">*</span>\n            </label>\n            <input\n              type=\"text\"\n              value={guestInfo.firstName}\n              onChange={(e) => setGuestInfo({ ...guestInfo, firstName: e.target.value })}\n              className={`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 text-sm ${\n                errors.firstName ? 'border-red-500' : 'border-gray-300'\n              }`}\n              placeholder=\"John\"\n            />\n            {errors.firstName && (\n              <p className=\"text-xs text-red-500 mt-1\">{errors.firstName}</p>\n            )}\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Last Name <span className=\"text-red-500\">*</span>\n            </label>\n            <input\n              type=\"text\"\n              value={guestInfo.lastName}\n              onChange={(e) => setGuestInfo({ ...guestInfo, lastName: e.target.value })}\n              className={`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 text-sm ${\n                errors.lastName ? 'border-red-500' : 'border-gray-300'\n              }`}\n              placeholder=\"Doe\"\n            />\n            {errors.lastName && (\n              <p className=\"text-xs text-red-500 mt-1\">{errors.lastName}</p>\n            )}\n          </div>\n        </div>\n\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n            Email Address <span className=\"text-red-500\">*</span>\n          </label>\n          <input\n            type=\"email\"\n            value={guestInfo.email}\n            onChange={(e) => setGuestInfo({ ...guestInfo, email: e.target.value })}\n            className={`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 text-sm ${\n              errors.email ? 'border-red-500' : 'border-gray-300'\n            }`}\n            placeholder=\"john.doe@example.com\"\n          />\n          {errors.email && (\n            <p className=\"text-xs text-red-500 mt-1\">{errors.email}</p>\n          )}\n          <p className=\"text-xs text-gray-500 mt-1\">\n            We'll send your order confirmation here\n          </p>\n        </div>\n\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n            Phone Number <span className=\"text-red-500\">*</span>\n          </label>\n          <input\n            type=\"tel\"\n            value={guestInfo.phone}\n            onChange={(e) => setGuestInfo({ ...guestInfo, phone: e.target.value })}\n            className={`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 text-sm ${\n              errors.phone ? 'border-red-500' : 'border-gray-300'\n            }`}\n            placeholder=\"+234 800 000 0000\"\n          />\n          {errors.phone && (\n            <p className=\"text-xs text-red-500 mt-1\">{errors.phone}</p>\n          )}\n        </div>\n\n        <div className=\"bg-emerald-50 border border-emerald-200 rounded-lg p-4\">\n          <div className=\"flex items-start gap-3\">\n            <i className=\"ri-information-line text-emerald-600 text-xl flex-shrink-0 mt-0.5\"></i>\n            <div>\n              <h4 className=\"font-medium text-emerald-900 mb-1\">Why create an account?</h4>\n              <ul className=\"text-sm text-emerald-700 space-y-1\">\n                <li>• Track your orders easily</li>\n                <li>• Save addresses for faster checkout</li>\n                <li>• Get exclusive deals and rewards</li>\n                <li>• View your order history</li>\n              </ul>\n            </div>\n          </div>\n        </div>\n\n        <button\n          type=\"submit\"\n          className=\"w-full bg-emerald-600 hover:bg-emerald-700 text-white py-3 rounded-lg font-semibold transition-colors cursor-pointer whitespace-nowrap\"\n        >\n          Continue to Shipping\n        </button>\n\n        <div className=\"text-center\">\n          <button\n            type=\"button\"\n            onClick={() => window.REACT_APP_NAVIGATE('/login')}\n            className=\"text-sm text-emerald-600 hover:text-emerald-700 font-medium cursor-pointer whitespace-nowrap\"\n          >\n            Already have an account? Sign in\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n}\n","import { useState } from 'react';\n\ninterface Address {\n  id: string;\n  label: string;\n  name: string;\n  street: string;\n  city: string;\n  state: string;\n  zipCode: string;\n  country: string;\n  phone: string;\n  isDefault: boolean;\n}\n\ninterface SavedAddressesProps {\n  onSelectAddress: (address: Address) => void;\n}\n\nexport default function SavedAddresses({ onSelectAddress }: SavedAddressesProps) {\n  const [addresses, setAddresses] = useState<Address[]>([\n    {\n      id: '1',\n      label: 'Home',\n      name: 'John Doe',\n      street: '123 Main Street, Apt 4B',\n      city: 'Lagos',\n      state: 'Lagos State',\n      zipCode: '100001',\n      country: 'Nigeria',\n      phone: '+234 800 000 0000',\n      isDefault: true,\n    },\n    {\n      id: '2',\n      label: 'Office',\n      name: 'John Doe',\n      street: '456 Business Avenue, Floor 5',\n      city: 'Lagos',\n      state: 'Lagos State',\n      zipCode: '100002',\n      country: 'Nigeria',\n      phone: '+234 800 000 0001',\n      isDefault: false,\n    },\n  ]);\n\n  const [selectedId, setSelectedId] = useState(addresses.find((a) => a.isDefault)?.id || '');\n  const [showAddModal, setShowAddModal] = useState(false);\n\n  const handleSelect = (address: Address) => {\n    setSelectedId(address.id);\n    onSelectAddress(address);\n  };\n\n  const handleSetDefault = (id: string) => {\n    setAddresses(addresses.map((addr) => ({\n      ...addr,\n      isDefault: addr.id === id,\n    })));\n  };\n\n  const handleDelete = (id: string) => {\n    if (confirm('Are you sure you want to delete this address?')) {\n      setAddresses(addresses.filter((addr) => addr.id !== id));\n    }\n  };\n\n  return (\n    <div className=\"bg-white rounded-lg border border-gray-200 p-6\">\n      <div className=\"flex items-center justify-between mb-6\">\n        <h2 className=\"text-xl font-bold text-gray-900\">Saved Addresses</h2>\n        <button\n          onClick={() => setShowAddModal(true)}\n          className=\"flex items-center gap-2 px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg font-medium transition-colors cursor-pointer whitespace-nowrap\"\n        >\n          <i className=\"ri-add-line\"></i>\n          Add New Address\n        </button>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n        {addresses.map((address) => (\n          <div\n            key={address.id}\n            className={`border-2 rounded-lg p-4 cursor-pointer transition-all ${\n              selectedId === address.id\n                ? 'border-emerald-600 bg-emerald-50'\n                : 'border-gray-200 hover:border-emerald-300'\n            }`}\n            onClick={() => handleSelect(address)}\n          >\n            <div className=\"flex items-start justify-between mb-3\">\n              <div className=\"flex items-center gap-2\">\n                <div className={`w-5 h-5 rounded-full border-2 flex items-center justify-center ${\n                  selectedId === address.id\n                    ? 'border-emerald-600 bg-emerald-600'\n                    : 'border-gray-300'\n                }`}>\n                  {selectedId === address.id && (\n                    <i className=\"ri-check-line text-white text-xs\"></i>\n                  )}\n                </div>\n                <div>\n                  <h3 className=\"font-semibold text-gray-900\">{address.label}</h3>\n                  {address.isDefault && (\n                    <span className=\"text-xs text-emerald-600 font-medium\">Default</span>\n                  )}\n                </div>\n              </div>\n              <div className=\"flex gap-1\">\n                <button\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    setShowAddModal(true);\n                  }}\n                  className=\"w-8 h-8 hover:bg-gray-100 rounded-full flex items-center justify-center transition-colors cursor-pointer whitespace-nowrap\"\n                >\n                  <i className=\"ri-edit-line text-gray-600\"></i>\n                </button>\n                <button\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    handleDelete(address.id);\n                  }}\n                  className=\"w-8 h-8 hover:bg-red-50 rounded-full flex items-center justify-center transition-colors cursor-pointer whitespace-nowrap\"\n                >\n                  <i className=\"ri-delete-bin-line text-red-600\"></i>\n                </button>\n              </div>\n            </div>\n\n            <div className=\"text-sm text-gray-600 space-y-1\">\n              <p className=\"font-medium text-gray-900\">{address.name}</p>\n              <p>{address.street}</p>\n              <p>{address.city}, {address.state} {address.zipCode}</p>\n              <p>{address.country}</p>\n              <p className=\"flex items-center gap-2 mt-2\">\n                <i className=\"ri-phone-line\"></i>\n                {address.phone}\n              </p>\n            </div>\n\n            {!address.isDefault && (\n              <button\n                onClick={(e) => {\n                  e.stopPropagation();\n                  handleSetDefault(address.id);\n                }}\n                className=\"mt-3 text-sm text-emerald-600 hover:text-emerald-700 font-medium cursor-pointer whitespace-nowrap\"\n              >\n                Set as Default\n              </button>\n            )}\n          </div>\n        ))}\n      </div>\n\n      {/* Add/Edit Address Modal */}\n      {showAddModal && (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\n            <div className=\"sticky top-0 bg-white border-b border-gray-200 p-4 flex items-center justify-between\">\n              <h3 className=\"text-lg font-semibold text-gray-900\">Add New Address</h3>\n              <button\n                onClick={() => setShowAddModal(false)}\n                className=\"w-8 h-8 hover:bg-gray-100 rounded-full flex items-center justify-center transition-colors cursor-pointer whitespace-nowrap\"\n              >\n                <i className=\"ri-close-line text-xl\"></i>\n              </button>\n            </div>\n\n            <div className=\"p-6\">\n              <form className=\"space-y-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Address Label\n                  </label>\n                  <input\n                    type=\"text\"\n                    placeholder=\"e.g., Home, Office, etc.\"\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 text-sm\"\n                  />\n                </div>\n\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      First Name\n                    </label>\n                    <input\n                      type=\"text\"\n                      className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 text-sm\"\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      Last Name\n                    </label>\n                    <input\n                      type=\"text\"\n                      className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 text-sm\"\n                    />\n                  </div>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Street Address\n                  </label>\n                  <input\n                    type=\"text\"\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 text-sm\"\n                  />\n                </div>\n\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      City\n                    </label>\n                    <input\n                      type=\"text\"\n                      className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 text-sm\"\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      State/Province\n                    </label>\n                    <input\n                      type=\"text\"\n                      className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 text-sm\"\n                    />\n                  </div>\n                </div>\n\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      ZIP/Postal Code\n                    </label>\n                    <input\n                      type=\"text\"\n                      className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 text-sm\"\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      Country\n                    </label>\n                    <select className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 text-sm\">\n                      <option>Nigeria</option>\n                      <option>Kenya</option>\n                      <option>Ghana</option>\n                      <option>South Africa</option>\n                    </select>\n                  </div>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Phone Number\n                  </label>\n                  <input\n                    type=\"tel\"\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 text-sm\"\n                  />\n                </div>\n\n                <label className=\"flex items-center gap-2 cursor-pointer\">\n                  <input\n                    type=\"checkbox\"\n                    className=\"w-4 h-4 text-emerald-600 rounded focus:ring-emerald-500\"\n                  />\n                  <span className=\"text-sm text-gray-700\">Set as default address</span>\n                </label>\n\n                <div className=\"flex gap-3 pt-4\">\n                  <button\n                    type=\"button\"\n                    onClick={() => setShowAddModal(false)}\n                    className=\"flex-1 border border-gray-300 text-gray-700 hover:bg-gray-50 py-2 rounded-lg font-medium transition-colors cursor-pointer whitespace-nowrap\"\n                  >\n                    Cancel\n                  </button>\n                  <button\n                    type=\"submit\"\n                    className=\"flex-1 bg-emerald-600 hover:bg-emerald-700 text-white py-2 rounded-lg font-medium transition-colors cursor-pointer whitespace-nowrap\"\n                  >\n                    Save Address\n                  </button>\n                </div>\n              </form>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport Header from '../../components/feature/Header';\nimport Footer from '../../components/feature/Footer';\nimport GuestCheckout from '../../components/feature/GuestCheckout';\nimport SavedAddresses from '../../components/feature/SavedAddresses';\nimport SkeletonLoader from '../../components/base/SkeletonLoader';\nimport { cartService, productsService, ordersService, paymentsService } from '../../lib/services';\nimport { useAuth } from '../../lib/auth';\nimport type { Cart, CartItem, Product } from '../../lib/types';\n\ninterface DisplayCartItem {\n  id: string;\n  productId: string;\n  name: string;\n  price: number;\n  quantity: number;\n  image: string;\n}\n\nexport default function Checkout() {\n  const navigate = useNavigate();\n  const { user } = useAuth();\n\n  const [step, setStep] = useState(1);\n  const [isGuest, setIsGuest] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [processing, setProcessing] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [cart, setCart] = useState<Cart | null>(null);\n  const [cartItems, setCartItems] = useState<DisplayCartItem[]>([]);\n  const [selectedPaymentProvider, setSelectedPaymentProvider] = useState<'paystack' | 'flutterwave' | 'stripe'>('paystack');\n\n  const [formData, setFormData] = useState({\n    email: user?.email || '',\n    firstName: user?.name?.split(' ')[0] || '',\n    lastName: user?.name?.split(' ').slice(1).join(' ') || '',\n    address: '',\n    city: user?.city || '',\n    state: '',\n    zipCode: '',\n    phone: user?.phone || '',\n  });\n\n  // Fetch cart on mount\n  useEffect(() => {\n    async function fetchCart() {\n      setLoading(true);\n      try {\n        const apiCart = await cartService.get(user?.id);\n        setCart(apiCart);\n\n        if (apiCart.items && apiCart.items.length > 0) {\n          const productIds = apiCart.items.map((item: CartItem) => item.productId);\n          const products = await productsService.getByIds(productIds);\n\n          const displayItems = apiCart.items.map((item: CartItem) => {\n            const product = products.find((p: Product) => p.id === item.productId);\n            return {\n              id: item.id,\n              productId: item.productId,\n              name: product?.title || 'Product',\n              price: Number(product?.price || 0),\n              quantity: item.qty,\n              image: product?.imageUrl || `https://readdy.ai/api/search-image?query=product&width=100&height=100&seq=${item.productId}&orientation=squarish`,\n            };\n          });\n\n          setCartItems(displayItems);\n        } else {\n          // Redirect to cart if empty\n          navigate('/cart');\n        }\n      } catch (err) {\n        console.error('Failed to fetch cart:', err);\n        setError('Could not load cart. Please try again.');\n      } finally {\n        setLoading(false);\n      }\n    }\n    fetchCart();\n  }, [user?.id, navigate]);\n\n  const subtotal = cartItems.reduce((sum, item) => sum + item.price * item.quantity, 0);\n  const shipping = subtotal > 50 ? 0 : 15.00;\n  const tax = subtotal * 0.08;\n  const total = subtotal + shipping + tax;\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value,\n    });\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError(null);\n\n    if (step < 3) {\n      setStep(step + 1);\n      return;\n    }\n\n    // Process payment\n    setProcessing(true);\n    try {\n      // Step 1: Create order from cart\n      const order = await ordersService.create({\n        shippingAdr: `${formData.address}, ${formData.city}, ${formData.state} ${formData.zipCode}`,\n        buyerName: `${formData.firstName} ${formData.lastName}`,\n        buyerPhone: formData.phone,\n        buyerEmail: formData.email,\n      }, cart!.id);\n\n      // Step 2: Create payment intent\n      const paymentIntent = await paymentsService.createIntent(order.id, selectedPaymentProvider);\n\n      // Step 3: Redirect to payment or show success\n      if (paymentIntent.checkoutUrl) {\n        // Redirect to external payment page\n        window.location.href = paymentIntent.checkoutUrl;\n      } else {\n        // Navigate to order confirmation\n        navigate(`/order-success?orderId=${order.id}`);\n      }\n    } catch (err: any) {\n      console.error('Checkout failed:', err);\n      setError(err.message || 'Could not process order. Please try again.');\n      setProcessing(false);\n    }\n  };\n\n  const handleAddressSelect = (address: any) => {\n    setFormData({\n      ...formData,\n      address: address.street,\n      city: address.city,\n      state: address.state,\n      zipCode: address.zipCode,\n      phone: address.phone,\n    });\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-gray-50 to-white\">\n        <Header />\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12\">\n        {error && (\n          <div className=\"mb-6 rounded-lg border border-red-200 bg-red-50 p-4 text-sm text-red-700\">\n            {error}\n          </div>\n        )}\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n            <div className=\"lg:col-span-2\">\n              <SkeletonLoader type=\"card\" />\n            </div>\n            <div>\n              <SkeletonLoader type=\"card\" />\n            </div>\n          </div>\n        </div>\n        <Footer />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-50 to-white\">\n      <Header />\n\n      {/* Progress Bar */}\n      <div className=\"bg-white border-b border-gray-200 animate-fade-in-down\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\n          <div className=\"flex items-center justify-between\">\n            {[\n              { num: 1, label: 'Account', icon: 'ri-user-line' },\n              { num: 2, label: 'Shipping', icon: 'ri-truck-line' },\n              { num: 3, label: 'Payment', icon: 'ri-bank-card-line' },\n            ].map((item, index) => (\n              <div key={item.num} className=\"flex items-center flex-1\">\n                <div className=\"flex items-center\">\n                  <div\n                    className={`w-12 h-12 rounded-full flex items-center justify-center font-bold transition-all duration-500 ${step >= item.num\n                        ? 'bg-gradient-to-r from-teal-600 to-emerald-600 text-white shadow-lg scale-110'\n                        : 'bg-gray-200 text-gray-600'\n                      }`}\n                  >\n                    <i className={`${item.icon} text-xl`}></i>\n                  </div>\n                  <div className=\"ml-3\">\n                    <p className={`text-sm font-semibold ${step >= item.num ? 'text-teal-600' : 'text-gray-600'}`}>\n                      Step {item.num}\n                    </p>\n                    <p className={`text-xs ${step >= item.num ? 'text-gray-900' : 'text-gray-500'}`}>\n                      {item.label}\n                    </p>\n                  </div>\n                </div>\n                {index < 2 && (\n                  <div className=\"flex-1 mx-4\">\n                    <div className=\"h-1 bg-gray-200 rounded-full overflow-hidden\">\n                      <div\n                        className={`h-full bg-gradient-to-r from-teal-600 to-emerald-600 transition-all duration-500 ${step > item.num ? 'w-full' : 'w-0'\n                          }`}\n                      ></div>\n                    </div>\n                  </div>\n                )}\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12\">\n        {/* Error Message */}\n        {error && (\n          <div className=\"mb-6 bg-red-50 border border-red-200 rounded-lg p-4\">\n            <div className=\"flex items-center gap-3\">\n              <i className=\"ri-error-warning-line text-red-500 text-xl\"></i>\n              <p className=\"text-red-800\">{error}</p>\n            </div>\n          </div>\n        )}\n\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n          {/* Checkout Form */}\n          <div className=\"lg:col-span-2\">\n            <form onSubmit={handleSubmit} className=\"space-y-6\">\n              {/* Step 1: Account */}\n              {step === 1 && (\n                <div className=\"bg-white rounded-2xl shadow-lg p-8 animate-slide-in-left\">\n                  <h2 className=\"text-2xl font-bold text-gray-900 mb-6\">Account Information</h2>\n\n                  <GuestCheckout onGuestSelect={(guest) => setIsGuest(guest)} />\n\n                  {isGuest && (\n                    <div className=\"mt-6 space-y-4 animate-fade-in-up\">\n                      <div>\n                        <label className=\"block text-sm font-semibold text-gray-900 mb-2\">\n                          Email Address\n                        </label>\n                        <input\n                          type=\"email\"\n                          name=\"email\"\n                          value={formData.email}\n                          onChange={handleInputChange}\n                          required\n                          className=\"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-teal-500 transition-colors\"\n                          placeholder=\"your@email.com\"\n                        />\n                      </div>\n                    </div>\n                  )}\n\n                  <button\n                    type=\"submit\"\n                    className=\"mt-6 w-full bg-gradient-to-r from-teal-600 to-emerald-600 text-white py-4 rounded-xl font-semibold hover:from-teal-700 hover:to-emerald-700 transition-all duration-300 shadow-lg hover:shadow-xl hover:scale-105\"\n                  >\n                    Continue to Shipping\n                  </button>\n                </div>\n              )}\n\n              {/* Step 2: Shipping */}\n              {step === 2 && (\n                <div className=\"bg-white rounded-2xl shadow-lg p-8 animate-slide-in-left\">\n                  <h2 className=\"text-2xl font-bold text-gray-900 mb-6\">Shipping Information</h2>\n\n                  <SavedAddresses onSelectAddress={handleAddressSelect} />\n\n                  <div className=\"mt-6 grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <div>\n                      <label className=\"block text-sm font-semibold text-gray-900 mb-2\">First Name</label>\n                      <input\n                        type=\"text\"\n                        name=\"firstName\"\n                        value={formData.firstName}\n                        onChange={handleInputChange}\n                        required\n                        className=\"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-teal-500 transition-colors\"\n                      />\n                    </div>\n                    <div>\n                      <label className=\"block text-sm font-semibold text-gray-900 mb-2\">Last Name</label>\n                      <input\n                        type=\"text\"\n                        name=\"lastName\"\n                        value={formData.lastName}\n                        onChange={handleInputChange}\n                        required\n                        className=\"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-teal-500 transition-colors\"\n                      />\n                    </div>\n                    <div className=\"md:col-span-2\">\n                      <label className=\"block text-sm font-semibold text-gray-900 mb-2\">Address</label>\n                      <input\n                        type=\"text\"\n                        name=\"address\"\n                        value={formData.address}\n                        onChange={handleInputChange}\n                        required\n                        className=\"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-teal-500 transition-colors\"\n                      />\n                    </div>\n                    <div>\n                      <label className=\"block text-sm font-semibold text-gray-900 mb-2\">City</label>\n                      <input\n                        type=\"text\"\n                        name=\"city\"\n                        value={formData.city}\n                        onChange={handleInputChange}\n                        required\n                        className=\"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-teal-500 transition-colors\"\n                      />\n                    </div>\n                    <div>\n                      <label className=\"block text-sm font-semibold text-gray-900 mb-2\">State</label>\n                      <input\n                        type=\"text\"\n                        name=\"state\"\n                        value={formData.state}\n                        onChange={handleInputChange}\n                        required\n                        className=\"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-teal-500 transition-colors\"\n                      />\n                    </div>\n                    <div>\n                      <label className=\"block text-sm font-semibold text-gray-900 mb-2\">ZIP Code</label>\n                      <input\n                        type=\"text\"\n                        name=\"zipCode\"\n                        value={formData.zipCode}\n                        onChange={handleInputChange}\n                        required\n                        className=\"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-teal-500 transition-colors\"\n                      />\n                    </div>\n                    <div>\n                      <label className=\"block text-sm font-semibold text-gray-900 mb-2\">Phone</label>\n                      <input\n                        type=\"tel\"\n                        name=\"phone\"\n                        value={formData.phone}\n                        onChange={handleInputChange}\n                        required\n                        className=\"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-teal-500 transition-colors\"\n                      />\n                    </div>\n                  </div>\n\n                  <div className=\"mt-6 flex space-x-4\">\n                    <button\n                      type=\"button\"\n                      onClick={() => setStep(1)}\n                      className=\"flex-1 border-2 border-gray-300 text-gray-700 py-4 rounded-xl font-semibold hover:bg-gray-50 transition-all duration-300 hover:scale-105\"\n                    >\n                      Back\n                    </button>\n                    <button\n                      type=\"submit\"\n                      className=\"flex-1 bg-gradient-to-r from-teal-600 to-emerald-600 text-white py-4 rounded-xl font-semibold hover:from-teal-700 hover:to-emerald-700 transition-all duration-300 shadow-lg hover:shadow-xl hover:scale-105\"\n                    >\n                      Continue to Payment\n                    </button>\n                  </div>\n                </div>\n              )}\n\n              {/* Step 3: Payment */}\n              {step === 3 && (\n                <div className=\"bg-white rounded-2xl shadow-lg p-8 animate-slide-in-left\">\n                  <h2 className=\"text-2xl font-bold text-gray-900 mb-6\">Payment Method</h2>\n\n                  {/* Payment Provider Selection */}\n                  <div className=\"space-y-3 mb-6\">\n                    <label className=\"block text-sm font-semibold text-gray-900 mb-3\">\n                      Select Payment Provider\n                    </label>\n                    {[\n                      { id: 'paystack', name: 'Paystack', icon: 'ri-bank-card-line', desc: 'Pay with card, bank transfer, or USSD' },\n                      { id: 'flutterwave', name: 'Flutterwave', icon: 'ri-flutter-fill', desc: 'Multiple payment options across Africa' },\n                      { id: 'stripe', name: 'Stripe', icon: 'ri-visa-line', desc: 'International cards accepted' },\n                    ].map((provider) => (\n                      <label\n                        key={provider.id}\n                        className={`flex items-center p-4 border-2 rounded-xl cursor-pointer transition-all ${selectedPaymentProvider === provider.id\n                            ? 'border-teal-500 bg-teal-50'\n                            : 'border-gray-300 hover:border-gray-400'\n                          }`}\n                      >\n                        <input\n                          type=\"radio\"\n                          name=\"paymentProvider\"\n                          value={provider.id}\n                          checked={selectedPaymentProvider === provider.id}\n                          onChange={(e) => setSelectedPaymentProvider(e.target.value as any)}\n                          className=\"sr-only\"\n                        />\n                        <i className={`${provider.icon} text-2xl mr-4 ${selectedPaymentProvider === provider.id ? 'text-teal-600' : 'text-gray-500'\n                          }`}></i>\n                        <div className=\"flex-1\">\n                          <p className=\"font-semibold text-gray-900\">{provider.name}</p>\n                          <p className=\"text-sm text-gray-600\">{provider.desc}</p>\n                        </div>\n                        {selectedPaymentProvider === provider.id && (\n                          <i className=\"ri-checkbox-circle-fill text-teal-600 text-xl\"></i>\n                        )}\n                      </label>\n                    ))}\n                  </div>\n\n                  <div className=\"bg-gray-50 rounded-lg p-4 mb-6\">\n                    <p className=\"text-sm text-gray-600\">\n                      <i className=\"ri-information-line mr-2\"></i>\n                      You will be redirected to {selectedPaymentProvider} to complete your payment securely.\n                    </p>\n                  </div>\n\n                  <div className=\"flex space-x-4\">\n                    <button\n                      type=\"button\"\n                      onClick={() => setStep(2)}\n                      disabled={processing}\n                      className=\"flex-1 border-2 border-gray-300 text-gray-700 py-4 rounded-xl font-semibold hover:bg-gray-50 transition-all duration-300 hover:scale-105 disabled:opacity-50\"\n                    >\n                      Back\n                    </button>\n                    <button\n                      type=\"submit\"\n                      disabled={processing}\n                      className=\"flex-1 bg-gradient-to-r from-teal-600 to-emerald-600 text-white py-4 rounded-xl font-semibold hover:from-teal-700 hover:to-emerald-700 transition-all duration-300 shadow-lg hover:shadow-xl hover:scale-105 disabled:opacity-50\"\n                    >\n                      {processing ? (\n                        <span className=\"flex items-center justify-center\">\n                          <i className=\"ri-loader-4-line animate-spin mr-2\"></i>\n                          Processing...\n                        </span>\n                      ) : (\n                        `Pay $${total.toFixed(2)}`\n                      )}\n                    </button>\n                  </div>\n                </div>\n              )}\n            </form>\n          </div>\n\n          {/* Order Summary Sidebar */}\n          <div className=\"lg:col-span-1\">\n            <div className=\"bg-white rounded-2xl shadow-lg p-6 sticky top-24 animate-slide-in-right\">\n              <h2 className=\"text-2xl font-bold text-gray-900 mb-6\">Order Summary</h2>\n\n              {/* Cart Items */}\n              <div className=\"space-y-4 mb-6\">\n                {cartItems.map((item) => (\n                  <div key={item.id} className=\"flex items-center space-x-4\">\n                    <div className=\"w-16 h-16 bg-gray-100 rounded-lg overflow-hidden flex-shrink-0\">\n                      <img src={item.image} alt={item.name} className=\"w-full h-full object-cover\" />\n                    </div>\n                    <div className=\"flex-1\">\n                      <p className=\"text-sm font-semibold text-gray-900\">{item.name}</p>\n                      <p className=\"text-xs text-gray-600\">Qty: {item.quantity}</p>\n                    </div>\n                    <p className=\"text-sm font-bold text-gray-900\">\n                      ${(item.price * item.quantity).toFixed(2)}\n                    </p>\n                  </div>\n                ))}\n              </div>\n\n              {/* Price Breakdown */}\n              <div className=\"space-y-3 mb-6 pt-6 border-t border-gray-200\">\n                <div className=\"flex justify-between text-gray-700\">\n                  <span>Subtotal</span>\n                  <span className=\"font-semibold\">${subtotal.toFixed(2)}</span>\n                </div>\n                <div className=\"flex justify-between text-gray-700\">\n                  <span>Shipping</span>\n                  <span className=\"font-semibold\">\n                    {shipping === 0 ? <span className=\"text-teal-600\">FREE</span> : `$${shipping.toFixed(2)}`}\n                  </span>\n                </div>\n                <div className=\"flex justify-between text-gray-700\">\n                  <span>Tax</span>\n                  <span className=\"font-semibold\">${tax.toFixed(2)}</span>\n                </div>\n                <div className=\"border-t-2 border-gray-200 pt-3\">\n                  <div className=\"flex justify-between text-xl font-bold text-gray-900\">\n                    <span>Total</span>\n                    <span className=\"text-teal-600\">${total.toFixed(2)}</span>\n                  </div>\n                </div>\n              </div>\n\n              {/* Trust Badges */}\n              <div className=\"pt-6 border-t border-gray-200 space-y-3\">\n                <div className=\"flex items-center text-sm text-gray-600\">\n                  <i className=\"ri-shield-check-line text-teal-600 mr-2\"></i>\n                  Secure checkout\n                </div>\n                <div className=\"flex items-center text-sm text-gray-600\">\n                  <i className=\"ri-lock-line text-teal-600 mr-2\"></i>\n                  SSL encrypted\n                </div>\n                <div className=\"flex items-center text-sm text-gray-600\">\n                  <i className=\"ri-arrow-go-back-line text-teal-600 mr-2\"></i>\n                  30-day return policy\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <Footer />\n    </div>\n  );\n}\n"],"names":["paymentsService","orderId","provider","api","maxWaitMs","startTime","pollInterval","payment","resolve","reference","transactionId","sessionId","userId","page","limit","GuestCheckout","onContinue","guestInfo","setGuestInfo","useState","errors","setErrors","validateForm","newErrors","handleSubmit","e","jsxs","jsx","SavedAddresses","onSelectAddress","addresses","setAddresses","selectedId","setSelectedId","a","showAddModal","setShowAddModal","handleSelect","address","handleSetDefault","id","addr","handleDelete","Checkout","navigate","useNavigate","user","useAuth","step","setStep","isGuest","setIsGuest","loading","setLoading","processing","setProcessing","error","setError","cart","setCart","cartItems","setCartItems","selectedPaymentProvider","setSelectedPaymentProvider","formData","setFormData","useEffect","fetchCart","apiCart","cartService","productIds","item","products","productsService","displayItems","product","p","err","subtotal","sum","shipping","tax","total","handleInputChange","order","ordersService","paymentIntent","handleAddressSelect","Header","SkeletonLoader","Footer","index","guest"],"mappings":"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"}