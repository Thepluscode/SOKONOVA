import{a as E,e as R,r as l,j as e,L as B}from"./index-D6MMDBiK.js";import{H as I,F as q}from"./Footer-BKaNYoCi.js";import{B as x}from"./Button-Ddz3JBjX.js";import{I as F}from"./Input-6uDYQbFZ.js";import{o as O}from"./ordersService-Bb6BdmnW.js";import{p as w}from"./payoutsService-DUkSO7Cr.js";function Q(){const{user:d}=E();R("SELLER");const[c,P]=l.useState("overview"),[S,o]=l.useState(!1),[A,m]=l.useState(!1),[i,g]=l.useState(""),[u,j]=l.useState(""),[H,b]=l.useState(!0),[_,z]=l.useState(!1),[T,f]=l.useState(null),[t,D]=l.useState({availableBalance:0,pendingEarnings:0,totalPaidOut:0,nextPayoutDate:new Date(Date.now()+10080*60*1e3).toISOString(),minimumPayout:50,commissionRate:10}),[N,k]=l.useState([]),[$,M]=l.useState([]),h=[{id:"1",type:"bank",details:"Bank Account ****4532",isDefault:!0},{id:"2",type:"mobile_money",details:"M-Pesa +254 *** *** 789",isDefault:!1},{id:"3",type:"paypal",details:"seller@email.com",isDefault:!1}];l.useEffect(()=>{async function s(){if(d?.id){b(!0),f(null);try{const[n,y]=await Promise.all([w.getSummary(d.id).catch(()=>null),w.getHistory(d.id).catch(()=>[])]);n&&D(a=>({...a,availableBalance:n.available||0,pendingEarnings:n.pending||0,totalPaidOut:n.totalPaidOut||0})),y&&y.length>0&&k(y.map(a=>({id:a.id,amount:a.amount,commission:a.amount*.1,netAmount:a.amount*.9,status:a.status,method:a.method||"Bank Account",requestedAt:a.createdAt,processedAt:a.paidAt})));try{const a=await O.listForUser(d.id);a&&a.length>0&&M(a.map(r=>({orderId:r.id,productName:r.items?.[0]?.product?.title||"Product",orderAmount:Number(r.total),commission:Number(r.total)*.1,netEarning:Number(r.total)*.9,status:r.paymentStatus==="PAID"?"available":"pending",orderDate:r.createdAt})))}catch{}}catch(n){console.error("Failed to fetch payout data:",n),f("Failed to load payout data. Please try again.")}finally{b(!1)}}}s()},[d?.id]);const p=s=>{switch(s){case"completed":case"paid_out":return"text-green-600 bg-green-100";case"processing":return"text-blue-600 bg-blue-100";case"pending":case"available":return"text-yellow-600 bg-yellow-100";case"failed":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},v=s=>{switch(s){case"bank":return"ri-bank-line";case"mobile_money":return"ri-smartphone-line";case"paypal":return"ri-paypal-line";default:return"ri-wallet-line"}},L=()=>{const s=parseFloat(i);if(s<t.minimumPayout){alert(`Minimum payout amount is $${t.minimumPayout}`);return}if(s>t.availableBalance){alert("Insufficient balance");return}if(!u){alert("Please select a payout method");return}console.log("Requesting payout:",{amount:s,method:u}),o(!1),g(""),j("")},C=()=>{console.log("Exporting earnings to CSV")};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(I,{}),e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(B,{to:"/seller-dashboard",className:"text-gray-600 hover:text-gray-900",children:e.jsx("i",{className:"ri-arrow-left-line text-xl"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Payouts & Earnings"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your earnings and payout methods"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(x,{variant:"outline",onClick:C,children:[e.jsx("i",{className:"ri-download-line mr-2"}),"Export CSV"]}),e.jsxs(x,{onClick:()=>o(!0),children:[e.jsx("i",{className:"ri-wallet-3-line mr-2"}),"Request Payout"]})]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-lg p-6 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-sm font-medium opacity-90",children:"Available Balance"}),e.jsx("i",{className:"ri-wallet-3-line text-xl opacity-80"})]}),e.jsxs("p",{className:"text-3xl font-bold mb-1",children:["$",t.availableBalance.toLocaleString()]}),e.jsx("p",{className:"text-emerald-100 text-sm",children:"Ready to withdraw"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm border-2 border-yellow-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600",children:"Pending Earnings"}),e.jsx("i",{className:"ri-time-line text-xl text-yellow-600"})]}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900 mb-1",children:["$",t.pendingEarnings.toLocaleString()]}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Processing orders"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600",children:"Total Paid Out"}),e.jsx("i",{className:"ri-check-double-line text-xl text-green-600"})]}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900 mb-1",children:["$",t.totalPaidOut.toLocaleString()]}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Lifetime earnings"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600",children:"Commission Rate"}),e.jsx("i",{className:"ri-percent-line text-xl text-blue-600"})]}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900 mb-1",children:[t.commissionRate,"%"]}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Platform fee"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm mb-8",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:[{id:"overview",label:"Overview",icon:"ri-dashboard-line"},{id:"history",label:"Payout History",icon:"ri-history-line"},{id:"earnings",label:"Earnings Details",icon:"ri-money-dollar-circle-line"},{id:"methods",label:"Payout Methods",icon:"ri-bank-card-line"}].map(s=>e.jsxs("button",{onClick:()=>P(s.id),className:`flex items-center py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap ${c===s.id?"border-emerald-500 text-emerald-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[e.jsx("i",{className:`${s.icon} mr-2`}),s.label]},s.id))})}),e.jsxs("div",{className:"p-6",children:[c==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("i",{className:"ri-information-line text-blue-600 text-xl mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-1",children:"Payout Schedule"}),e.jsxs("p",{className:"text-sm text-blue-800",children:["Payouts are processed weekly. Your next scheduled payout is on"," ",e.jsx("strong",{children:new Date(t.nextPayoutDate).toLocaleDateString()}),". Minimum payout amount is $",t.minimumPayout,"."]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Payouts"}),e.jsx("div",{className:"space-y-3",children:N.slice(0,3).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900",children:["$",s.netAmount.toLocaleString()]}),e.jsx("p",{className:"text-sm text-gray-600",children:s.method}),e.jsx("p",{className:"text-xs text-gray-500",children:new Date(s.requestedAt).toLocaleDateString()})]}),e.jsx("span",{className:`px-3 py-1 text-xs font-medium rounded-full ${p(s.status)}`,children:s.status})]},s.id))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Payout Methods"}),e.jsxs("div",{className:"space-y-3",children:[h.map(s=>e.jsx("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-white rounded-lg flex items-center justify-center",children:e.jsx("i",{className:`${v(s.type)} text-xl text-gray-700`})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.details}),s.isDefault&&e.jsx("span",{className:"text-xs text-emerald-600 font-medium",children:"Default"})]})]})},s.id)),e.jsxs("button",{onClick:()=>m(!0),className:"w-full p-4 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-emerald-500 hover:text-emerald-600 transition-colors",children:[e.jsx("i",{className:"ri-add-line mr-2"}),"Add Payment Method"]})]})]})]})]}),c==="history"&&e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Payout ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Commission"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Net Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Method"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:N.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.id}),s.transactionId&&e.jsx("p",{className:"text-xs text-gray-500",children:s.transactionId})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-gray-900",children:["$",s.amount.toLocaleString()]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-red-600",children:["-$",s.commission.toLocaleString()]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap font-medium text-gray-900",children:["$",s.netAmount.toLocaleString()]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:s.method}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${p(s.status)}`,children:s.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:new Date(s.requestedAt).toLocaleDateString()})]},s.id))})]})})}),c==="earnings"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("select",{className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500",children:[e.jsx("option",{children:"All Status"}),e.jsx("option",{children:"Available"}),e.jsx("option",{children:"Pending"}),e.jsx("option",{children:"Paid Out"})]})})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Order ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Product"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Order Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Commission"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Net Earning"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:$.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-medium text-gray-900",children:s.orderId}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:s.productName}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-gray-900",children:["$",s.orderAmount.toLocaleString()]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-red-600",children:["-$",s.commission.toLocaleString()]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap font-medium text-green-600",children:["$",s.netEarning.toLocaleString()]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${p(s.status)}`,children:s.status.replace("_"," ")})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:new Date(s.orderDate).toLocaleDateString()})]},s.orderId))})]})})]}),c==="methods"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:h.map(s=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:`${v(s.type)} text-2xl text-gray-700`})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.details}),e.jsx("p",{className:"text-sm text-gray-600 capitalize",children:s.type.replace("_"," ")})]})]}),s.isDefault&&e.jsx("span",{className:"px-2 py-1 text-xs font-medium text-emerald-600 bg-emerald-100 rounded-full",children:"Default"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[!s.isDefault&&e.jsx(x,{variant:"outline",className:"flex-1",children:"Set as Default"}),e.jsx("button",{className:"px-4 py-2 text-red-600 hover:bg-red-50 rounded-lg",children:e.jsx("i",{className:"ri-delete-bin-line"})})]})]},s.id))}),e.jsxs("button",{onClick:()=>m(!0),className:"w-full p-6 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-emerald-500 hover:text-emerald-600 transition-colors",children:[e.jsx("i",{className:"ri-add-line text-2xl mb-2"}),e.jsx("p",{className:"font-medium",children:"Add New Payment Method"}),e.jsx("p",{className:"text-sm",children:"Bank account, mobile money, or PayPal"})]})]})]})]})]}),S&&e.jsx("div",{className:"fixed inset-0 bg-black bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Request Payout"}),e.jsx("button",{onClick:()=>o(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx("i",{className:"ri-close-line text-2xl"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Available Balance"}),e.jsxs("p",{className:"text-3xl font-bold text-emerald-600",children:["$",t.availableBalance.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payout Amount"}),e.jsx(F,{type:"number",placeholder:`Minimum $${t.minimumPayout}`,value:i,onChange:s=>g(s.target.value),min:t.minimumPayout,max:t.availableBalance}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Minimum: $",t.minimumPayout," â€¢ Maximum: $",t.availableBalance]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payout Method"}),e.jsxs("select",{value:u,onChange:s=>j(s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500",children:[e.jsx("option",{value:"",children:"Select method"}),h.map(s=>e.jsxs("option",{value:s.id,children:[s.details," ",s.isDefault?"(Default)":""]},s.id))]})]}),i&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Payout Amount"}),e.jsxs("span",{className:"font-medium",children:["$",parseFloat(i).toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-600",children:["Commission (",t.commissionRate,"%)"]}),e.jsxs("span",{className:"text-red-600",children:["-$",(parseFloat(i)*t.commissionRate/100).toFixed(2)]})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-2 flex justify-between",children:[e.jsx("span",{className:"font-medium text-gray-900",children:"You'll Receive"}),e.jsxs("span",{className:"font-bold text-emerald-600",children:["$",(parseFloat(i)*(1-t.commissionRate/100)).toFixed(2)]})]})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx(x,{variant:"outline",onClick:()=>o(!1),className:"flex-1",children:"Cancel"}),e.jsx(x,{onClick:L,className:"flex-1",children:"Request Payout"})]})]})]})}),A&&e.jsx("div",{className:"fixed inset-0 bg-black bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Add Payment Method"}),e.jsx("button",{onClick:()=>m(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx("i",{className:"ri-close-line text-2xl"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("button",{className:"p-4 border-2 border-gray-300 rounded-lg hover:border-emerald-500 hover:bg-emerald-50 transition-colors",children:[e.jsx("i",{className:"ri-bank-line text-2xl text-gray-700 mb-2"}),e.jsx("p",{className:"text-sm font-medium",children:"Bank"})]}),e.jsxs("button",{className:"p-4 border-2 border-gray-300 rounded-lg hover:border-emerald-500 hover:bg-emerald-50 transition-colors",children:[e.jsx("i",{className:"ri-smartphone-line text-2xl text-gray-700 mb-2"}),e.jsx("p",{className:"text-sm font-medium",children:"M-Pesa"})]}),e.jsxs("button",{className:"p-4 border-2 border-gray-300 rounded-lg hover:border-emerald-500 hover:bg-emerald-50 transition-colors",children:[e.jsx("i",{className:"ri-paypal-line text-2xl text-gray-700 mb-2"}),e.jsx("p",{className:"text-sm font-medium",children:"PayPal"})]})]}),e.jsx("p",{className:"text-sm text-gray-600 text-center",children:"Select a payment method type to continue"})]})]})}),e.jsx(q,{})]})}export{Q as default};
//# sourceMappingURL=page-DgZYytQH.js.map
