import{a as l,g as F,r,j as e}from"./index-CqGhWzgp.js";import{H as M,F as z}from"./Footer-oyiSEV0O.js";import{B as d}from"./Button-DkNP6qhN.js";const p={getSellerApplications:async a=>a==="pending"?l.get("/seller-applications/pending"):l.get("/seller-applications/pending"),approveApplication:async(a,i)=>l.patch(`/seller-applications/${a}/approve`,{adminNote:i}),rejectApplication:async(a,i)=>l.patch(`/seller-applications/${a}/reject`,{adminNote:i}),getAdminStats:async()=>l.get("/analytics-rollup/admin-stats"),getPlatformAnalytics:async(a="30d")=>l.get(`/analytics-rollup/platform?period=${a}`),getTrustOverview:async()=>l.get("/trust/overview"),updateTrustScore:async(a,i,j)=>l.patch(`/trust/seller/${a}`,{adjustment:i,reason:j}),getControlTowerStatus:async()=>l.get("/admin-control-tower/status"),getSubscriptionPlans:async()=>l.get("/subscriptions/plans"),getActiveSubscriptions:async()=>l.get("/subscriptions/active")};function V(){F("ADMIN");const[a,i]=r.useState("pending"),[j,u]=r.useState(!1),[D,f]=r.useState(!1),[n,o]=r.useState(null),[m,b]=r.useState(""),[w,v]=r.useState(""),[O,S]=r.useState(!0),[q,g]=r.useState(!1),[I,h]=r.useState(null),[x,N]=r.useState([]),[A,R]=r.useState([]),[C,k]=r.useState([]);r.useEffect(()=>{async function s(){S(!0),h(null);try{const[t,c,y]=await Promise.all([p.getSellerApplications("pending").catch(()=>[]),p.getSellerApplications("approved").catch(()=>[]),p.getSellerApplications("rejected").catch(()=>[])]);N(t),R(c),k(y)}catch(t){console.error("Failed to fetch applications:",t),h("Could not load seller applications.")}finally{S(!1)}}s()},[]);const P=s=>{o(s),u(!0)},$=s=>{o(s),f(!0)},T=async()=>{if(n){g(!0);try{await p.approveApplication(n,w);const s=x.find(t=>t.id===n);s&&(N(t=>t.filter(c=>c.id!==n)),R(t=>[...t,{...s,status:"approved",approvedDate:new Date().toISOString()}])),u(!1),v(""),o(null)}catch(s){console.error("Failed to approve:",s),h("Could not approve seller. Please try again.")}finally{g(!1)}}},E=async()=>{if(!(!n||!m.trim())){g(!0);try{await p.rejectApplication(n,m);const s=x.find(t=>t.id===n);s&&(N(t=>t.filter(c=>c.id!==n)),k(t=>[...t,{...s,status:"rejected",rejectionReason:m,rejectedDate:new Date().toISOString()}])),f(!1),b(""),o(null)}catch(s){console.error("Failed to reject:",s),h("Could not reject seller. Please try again.")}finally{g(!1)}}};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(M,{}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8 animate-fade-in-down",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Seller Approval"}),e.jsx("p",{className:"text-gray-600",children:"Review and approve new seller applications"})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6 animate-fade-in-up",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("i",{className:"ri-information-line text-blue-600 text-xl mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Approval Guidelines"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:"• Verify all required documents are submitted and valid"}),e.jsx("li",{children:"• Check business registration and tax compliance"}),e.jsx("li",{children:"• Review seller experience and product category fit"}),e.jsx("li",{children:"• Ensure contact information is accurate and verifiable"}),e.jsx("li",{children:"• Approved sellers will receive welcome email with onboarding instructions"})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 animate-fade-in-up",style:{animationDelay:"100ms"},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Pending Review"}),e.jsx("p",{className:"text-3xl font-bold text-orange-600",children:x.length})]}),e.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-time-line text-2xl text-orange-600"})})]})}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 animate-fade-in-up",style:{animationDelay:"200ms"},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Approved"}),e.jsx("p",{className:"text-3xl font-bold text-green-600",children:A.length})]}),e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-checkbox-circle-line text-2xl text-green-600"})})]})}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 animate-fade-in-up",style:{animationDelay:"300ms"},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Rejected"}),e.jsx("p",{className:"text-3xl font-bold text-red-600",children:C.length})]}),e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-close-circle-line text-2xl text-red-600"})})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 mb-6 animate-scale-in",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("div",{className:"flex space-x-8 px-6",children:[e.jsxs("button",{onClick:()=>i("pending"),className:`py-4 border-b-2 font-medium text-sm transition-colors cursor-pointer ${a==="pending"?"border-emerald-600 text-emerald-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:["Pending",e.jsx("span",{className:"ml-2 px-2 py-1 bg-orange-100 text-orange-700 text-xs font-semibold rounded-full",children:x.length})]}),e.jsx("button",{onClick:()=>i("approved"),className:`py-4 border-b-2 font-medium text-sm transition-colors cursor-pointer ${a==="approved"?"border-emerald-600 text-emerald-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Approved"}),e.jsx("button",{onClick:()=>i("rejected"),className:`py-4 border-b-2 font-medium text-sm transition-colors cursor-pointer ${a==="rejected"?"border-emerald-600 text-emerald-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Rejected"})]})}),e.jsxs("div",{className:"p-6",children:[a==="pending"&&e.jsx("div",{className:"space-y-6",children:x.map((s,t)=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-6 hover-lift animate-fade-in-up",style:{animationDelay:`${t*100}ms`},children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-1",children:s.name}),e.jsx("p",{className:"text-gray-600",children:s.owner})]}),e.jsx("span",{className:"px-3 py-1 bg-orange-100 text-orange-700 text-sm font-medium rounded-full",children:"Pending"})]}),e.jsx("p",{className:"text-sm text-gray-700 mb-4 bg-gray-50 p-3 rounded-lg",children:s.businessDescription}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx("i",{className:"ri-mail-line mr-2"}),s.email]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx("i",{className:"ri-phone-line mr-2"}),s.phone]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx("i",{className:"ri-store-2-line mr-2"}),s.category]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx("i",{className:"ri-map-pin-line mr-2"}),s.location]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx("i",{className:"ri-calendar-line mr-2"}),"Submitted: ",s.submittedDate]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx("i",{className:"ri-briefcase-line mr-2"}),"Experience: ",s.experience]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Submitted Documents:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.documents.map((c,y)=>e.jsxs("span",{className:"px-3 py-1 bg-green-100 text-green-700 text-sm rounded-full",children:[e.jsx("i",{className:"ri-file-check-line mr-1"}),c]},y))})]}),e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-star-fill text-yellow-400 mr-1"}),e.jsx("span",{className:"font-semibold text-gray-900",children:s.rating}),e.jsx("span",{className:"text-gray-600 ml-1",children:"Previous Rating"})]})})]}),e.jsxs("div",{className:"flex flex-col gap-3 lg:w-48",children:[e.jsxs(d,{onClick:()=>P(s.id),className:"w-full bg-green-600 hover:bg-green-700 text-white whitespace-nowrap",children:[e.jsx("i",{className:"ri-checkbox-circle-line mr-2"}),"Approve"]}),e.jsxs(d,{onClick:()=>$(s.id),variant:"outline",className:"w-full border-red-600 text-red-600 hover:bg-red-50 whitespace-nowrap",children:[e.jsx("i",{className:"ri-close-circle-line mr-2"}),"Reject"]}),e.jsxs(d,{variant:"outline",className:"w-full whitespace-nowrap",children:[e.jsx("i",{className:"ri-eye-line mr-2"}),"View Details"]})]})]})},s.id))}),a==="approved"&&e.jsx("div",{className:"space-y-4",children:A.map((s,t)=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-6 hover-lift animate-fade-in-up",style:{animationDelay:`${t*100}ms`},children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:s.name}),e.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-700 text-sm font-medium rounded-full",children:"Approved"})]}),e.jsx("p",{className:"text-gray-600 mb-3",children:s.owner}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Category"}),e.jsx("p",{className:"font-medium text-gray-900",children:s.category})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Location"}),e.jsx("p",{className:"font-medium text-gray-900",children:s.location})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Total Sales"}),e.jsx("p",{className:"font-medium text-green-600",children:s.totalSales})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Products"}),e.jsx("p",{className:"font-medium text-gray-900",children:s.products})]})]})]})})},s.id))}),a==="rejected"&&e.jsx("div",{className:"space-y-4",children:C.map((s,t)=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-6 hover-lift animate-fade-in-up",style:{animationDelay:`${t*100}ms`},children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:s.name}),e.jsx("span",{className:"px-3 py-1 bg-red-100 text-red-700 text-sm font-medium rounded-full",children:"Rejected"})]}),e.jsx("p",{className:"text-gray-600 mb-3",children:s.owner}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 text-sm mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Category"}),e.jsx("p",{className:"font-medium text-gray-900",children:s.category})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Location"}),e.jsx("p",{className:"font-medium text-gray-900",children:s.location})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Rejected Date"}),e.jsx("p",{className:"font-medium text-gray-900",children:s.rejectedDate})]})]}),e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-red-800",children:[e.jsx("strong",{children:"Reason:"})," ",s.rejectionReason]})})]})})},s.id))})]})]})]}),j&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6 animate-scale-in",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx("i",{className:"ri-checkbox-circle-line text-2xl text-green-600"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Approve Seller"})]}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Are you sure you want to approve this seller? They will receive a welcome email with onboarding instructions."}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Approval Note (Optional)"}),e.jsx("textarea",{value:w,onChange:s=>v(s.target.value),placeholder:"Add any notes or special instructions...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 resize-none",rows:3})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(d,{onClick:T,className:"flex-1 bg-green-600 hover:bg-green-700 text-white whitespace-nowrap",children:"Confirm Approval"}),e.jsx(d,{onClick:()=>{u(!1),v(""),o(null)},variant:"outline",className:"flex-1 whitespace-nowrap",children:"Cancel"})]})]})}),D&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6 animate-scale-in",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx("i",{className:"ri-close-circle-line text-2xl text-red-600"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Reject Seller"})]}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Please provide a reason for rejection. The seller will be notified via email."}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Rejection Reason ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("textarea",{value:m,onChange:s=>b(s.target.value),placeholder:"Explain why this application is being rejected...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 resize-none",rows:4,required:!0})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(d,{onClick:E,disabled:!m.trim(),className:"flex-1 bg-red-600 hover:bg-red-700 text-white whitespace-nowrap disabled:bg-gray-300",children:"Confirm Rejection"}),e.jsx(d,{onClick:()=>{f(!1),b(""),o(null)},variant:"outline",className:"flex-1 whitespace-nowrap",children:"Cancel"})]})]})}),e.jsx(z,{})]})}export{V as default};
//# sourceMappingURL=page-SVa-3ZL2.js.map
