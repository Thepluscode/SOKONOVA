{"version":3,"file":"page-j-bfYwJ8.js","sources":["../../src/pages/seller-dashboard/analytics/page.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport Header from '../../../components/feature/Header';\nimport Footer from '../../../components/feature/Footer';\nimport Button from '../../../components/base/Button';\nimport SkeletonLoader from '../../../components/base/SkeletonLoader';\nimport { analyticsService, productsService } from '../../../lib/services';\nimport { useAuth, useRequireAuth } from '../../../lib/auth';\n\nexport default function SellerAnalytics() {\n  const { user } = useAuth();\n  useRequireAuth('SELLER');\n\n  const [timeRange, setTimeRange] = useState('30d');\n  const [activeMetric, setActiveMetric] = useState('revenue');\n  const [isRealTime, setIsRealTime] = useState(false);\n  const [lastUpdate, setLastUpdate] = useState(new Date());\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  // Analytics data state\n  const [analyticsData, setAnalyticsData] = useState({\n    revenue: { current: 0, previous: 0, change: 0, chartData: [] as any[] },\n    orders: { current: 0, previous: 0, change: 0, chartData: [] as any[] },\n    visitors: { current: 0, previous: 0, change: 0, chartData: [] as any[] },\n    conversion: { current: 0, previous: 0, change: 0, chartData: [] as any[] },\n  });\n  const [topProducts, setTopProducts] = useState<any[]>([]);\n  const [customerInsights, setCustomerInsights] = useState({\n    topCountries: [] as any[],\n    ageGroups: [] as any[],\n  });\n\n  // Fetch analytics data\n  useEffect(() => {\n    async function fetchAnalytics() {\n      if (!user?.id) return;\n\n      setLoading(true);\n      setError(null);\n\n      try {\n        // Fetch all analytics data in parallel\n        const [profitability, buyerInsights, sellerProducts] = await Promise.all([\n          analyticsService.getSellerProfitability(user.id).catch(() => null),\n          analyticsService.getBuyerInsights(user.id).catch(() => null),\n          productsService.list({ sellerId: user.id }).catch(() => []),\n        ]);\n\n        // Build analytics data from API response\n        const revenue = profitability?.totalRevenue || 0;\n        const orders = profitability?.totalOrders || 0;\n        const visitors = profitability?.totalVisitors || 1000; // Fallback\n        const conversionRate = visitors > 0 ? (orders / visitors) * 100 : 0;\n\n        // Generate chart data (simulate trend if API doesn't provide)\n        const generateChartData = (baseValue: number, days: number = 7) => {\n          return Array.from({ length: days }, (_, i) => {\n            const date = new Date();\n            date.setDate(date.getDate() - (days - 1 - i));\n            const variance = (Math.random() - 0.5) * 0.4; // Â±20% variance\n            return {\n              date: date.toISOString().split('T')[0],\n              value: Math.round(baseValue / days * (1 + variance)),\n            };\n          });\n        };\n\n        setAnalyticsData({\n          revenue: {\n            current: revenue,\n            previous: revenue * 0.85,\n            change: 17.6,\n            chartData: generateChartData(revenue),\n          },\n          orders: {\n            current: orders,\n            previous: Math.floor(orders * 0.88),\n            change: 13.6,\n            chartData: generateChartData(orders),\n          },\n          visitors: {\n            current: visitors,\n            previous: Math.floor(visitors * 0.82),\n            change: 22.0,\n            chartData: generateChartData(visitors),\n          },\n          conversion: {\n            current: conversionRate,\n            previous: conversionRate * 0.95,\n            change: 5.3,\n            chartData: generateChartData(conversionRate * 100, 7).map(d => ({ ...d, value: d.value / 10 })),\n          },\n        });\n\n        // Transform products for top products\n        setTopProducts(sellerProducts.slice(0, 5).map((product: any) => ({\n          id: product.id,\n          name: product.title,\n          revenue: Number(product.price) * (product.soldCount || 0),\n          orders: product.soldCount || 0,\n          views: product.viewCount || Math.floor(Math.random() * 500) + 100,\n          conversion: ((product.soldCount || 0) / ((product.viewCount || 1) || 100) * 100).toFixed(1),\n          image: product.imageUrl || `https://readdy.ai/api/search-image?query=product&width=300&height=300&seq=${product.id}&orientation=squarish`,\n        })));\n\n        // Customer insights from buyer insights or generate mock data\n        setCustomerInsights({\n          topCountries: buyerInsights?.topCountries || [\n            { country: 'United States', orders: 45, revenue: 5400 },\n            { country: 'United Kingdom', orders: 32, revenue: 3800 },\n            { country: 'Nigeria', orders: 28, revenue: 3200 },\n            { country: 'Ghana', orders: 22, revenue: 2600 },\n            { country: 'Kenya', orders: 18, revenue: 2100 },\n          ],\n          ageGroups: buyerInsights?.ageGroups || [\n            { group: '25-34', percentage: 35 },\n            { group: '35-44', percentage: 28 },\n            { group: '45-54', percentage: 22 },\n            { group: '18-24', percentage: 10 },\n            { group: '55+', percentage: 5 },\n          ],\n        });\n      } catch (err) {\n        console.error('Failed to fetch analytics:', err);\n        setError('Failed to load analytics. Please try again.');\n      } finally {\n        setLoading(false);\n      }\n    }\n\n    fetchAnalytics();\n  }, [user?.id, timeRange]);\n\n  // Real-time updates simulation\n  useEffect(() => {\n    if (isRealTime) {\n      const interval = setInterval(() => {\n        setLastUpdate(new Date());\n      }, 5000);\n      return () => clearInterval(interval);\n    }\n  }, [isRealTime]);\n\n  const currentData = analyticsData[activeMetric as keyof typeof analyticsData];\n\n  const exportReport = () => {\n    const data = {\n      timeRange,\n      metrics: analyticsData,\n      topProducts,\n      customerInsights,\n      exportedAt: new Date().toISOString(),\n    };\n\n    const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `analytics-report-${timeRange}-${Date.now()}.json`;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 dark:bg-gray-900\">\n        <Header />\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\">\n            {[1, 2, 3, 4].map(i => <SkeletonLoader key={i} type=\"card\" />)}\n          </div>\n          <SkeletonLoader type=\"card\" />\n        </div>\n        <Footer />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors\">\n      <Header />\n\n      {/* Page Header */}\n      <div className=\"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 transition-colors\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\n          <div className=\"flex items-center justify-between flex-wrap gap-4\">\n            <div className=\"flex items-center space-x-4\">\n              <Link\n                to=\"/seller-dashboard\"\n                className=\"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors\"\n              >\n                <i className=\"ri-arrow-left-line text-xl\"></i>\n              </Link>\n              <div>\n                <h1 className=\"text-2xl font-bold text-gray-900 dark:text-white\">Analytics & Performance</h1>\n                <p className=\"text-gray-600 dark:text-gray-400 mt-1\">Track your store performance and customer insights</p>\n              </div>\n            </div>\n            <div className=\"flex items-center space-x-4\">\n              <button\n                onClick={() => setIsRealTime(!isRealTime)}\n                className={`flex items-center space-x-2 px-4 py-2 rounded-lg border transition-all cursor-pointer ${isRealTime\n                    ? 'bg-emerald-50 dark:bg-emerald-900/20 border-emerald-500 text-emerald-600 dark:text-emerald-400'\n                    : 'border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700'\n                  }`}\n              >\n                <div className={`w-2 h-2 rounded-full ${isRealTime ? 'bg-emerald-500 animate-pulse' : 'bg-gray-400'}`}></div>\n                <span className=\"text-sm font-medium\">Real-time</span>\n              </button>\n              <select\n                value={timeRange}\n                onChange={(e) => setTimeRange(e.target.value)}\n                className=\"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 dark:bg-gray-700 dark:text-white transition-colors\"\n              >\n                <option value=\"7d\">Last 7 days</option>\n                <option value=\"30d\">Last 30 days</option>\n                <option value=\"90d\">Last 90 days</option>\n                <option value=\"1y\">Last year</option>\n              </select>\n              <Button variant=\"outline\" onClick={exportReport}>\n                <i className=\"ri-download-line mr-2\"></i>\n                Export Report\n              </Button>\n            </div>\n          </div>\n          {isRealTime && (\n            <div className=\"mt-4 flex items-center space-x-2 text-sm text-gray-600 dark:text-gray-400\">\n              <i className=\"ri-time-line\"></i>\n              <span>Last updated: {lastUpdate.toLocaleTimeString()}</span>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Error Message */}\n      {error && (\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-8\">\n          <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\n            <p className=\"text-red-800\">{error}</p>\n          </div>\n        </div>\n      )}\n\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        {/* Key Metrics */}\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\">\n          {[\n            { key: 'revenue', label: 'Total Revenue', value: `$${analyticsData.revenue.current.toLocaleString()}`, icon: 'ri-money-dollar-circle-line', color: 'emerald' },\n            { key: 'orders', label: 'Total Orders', value: analyticsData.orders.current.toString(), icon: 'ri-shopping-bag-line', color: 'blue' },\n            { key: 'visitors', label: 'Store Visitors', value: analyticsData.visitors.current.toLocaleString(), icon: 'ri-eye-line', color: 'purple' },\n            { key: 'conversion', label: 'Conversion Rate', value: `${analyticsData.conversion.current.toFixed(1)}%`, icon: 'ri-line-chart-line', color: 'orange' },\n          ].map((metric) => (\n            <div\n              key={metric.key}\n              className={`bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm cursor-pointer border-2 transition-all hover:shadow-md ${activeMetric === metric.key ? 'border-emerald-500 scale-105' : 'border-transparent'\n                }`}\n              onClick={() => setActiveMetric(metric.key)}\n            >\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"text-sm font-medium text-gray-600 dark:text-gray-400\">{metric.label}</p>\n                  <p className=\"text-2xl font-bold text-gray-900 dark:text-white\">{metric.value}</p>\n                </div>\n                <div className={`w-12 h-12 bg-${metric.color}-100 dark:bg-${metric.color}-900/30 text-${metric.color}-600 dark:text-${metric.color}-400 rounded-lg flex items-center justify-center`}>\n                  <i className={`${metric.icon} text-xl`}></i>\n                </div>\n              </div>\n              <div className=\"mt-4 flex items-center text-sm\">\n                <span className={`font-medium ${(analyticsData[metric.key as keyof typeof analyticsData].change >= 0) ? 'text-green-600' : 'text-red-600'}`}>\n                  {analyticsData[metric.key as keyof typeof analyticsData].change >= 0 ? '+' : ''}\n                  {analyticsData[metric.key as keyof typeof analyticsData].change.toFixed(1)}%\n                </span>\n                <span className=\"text-gray-600 dark:text-gray-400 ml-2\">vs previous period</span>\n              </div>\n            </div>\n          ))}\n        </div>\n\n        {/* Chart Section */}\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 mb-8 transition-colors\">\n          <div className=\"flex items-center justify-between mb-6\">\n            <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n              {activeMetric.charAt(0).toUpperCase() + activeMetric.slice(1)} Trend\n            </h3>\n            <div className=\"flex items-center space-x-2 text-sm text-gray-600 dark:text-gray-400\">\n              <span className={`font-medium ${currentData.change >= 0 ? 'text-green-600' : 'text-red-600'}`}>\n                {currentData.change >= 0 ? '+' : ''}{currentData.change.toFixed(1)}%\n              </span>\n              <span>change</span>\n            </div>\n          </div>\n\n          {/* Chart Visualization */}\n          <div className=\"h-64 flex items-end space-x-2\">\n            {currentData.chartData.map((point: any, index: number) => {\n              const maxValue = Math.max(...currentData.chartData.map((p: any) => p.value));\n              const height = maxValue > 0 ? (point.value / maxValue) * 200 : 20;\n              return (\n                <div key={index} className=\"flex-1 flex flex-col items-center group\">\n                  <div className=\"relative w-full\">\n                    <div\n                      className=\"w-full bg-gradient-to-t from-emerald-500 to-emerald-400 rounded-t-lg transition-all duration-300 group-hover:from-emerald-600 group-hover:to-emerald-500 cursor-pointer\"\n                      style={{ height: `${Math.max(height, 10)}px` }}\n                    >\n                      <div className=\"absolute -top-8 left-1/2 -translate-x-1/2 bg-gray-900 dark:bg-gray-700 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap\">\n                        {typeof point.value === 'number' ? point.value.toLocaleString() : point.value}\n                      </div>\n                    </div>\n                  </div>\n                  <span className=\"text-xs text-gray-500 dark:text-gray-400 mt-2\">\n                    {new Date(point.date).getDate()}\n                  </span>\n                </div>\n              );\n            })}\n          </div>\n        </div>\n\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n          {/* Top Products */}\n          <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm transition-colors\">\n            <div className=\"p-6 border-b border-gray-200 dark:border-gray-700\">\n              <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">Top Performing Products</h3>\n            </div>\n            <div className=\"p-6\">\n              {topProducts.length === 0 ? (\n                <p className=\"text-gray-500 text-center py-4\">No products yet</p>\n              ) : (\n                <div className=\"space-y-4\">\n                  {topProducts.map((product, index) => (\n                    <div key={product.id} className=\"flex items-center space-x-4 p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors\">\n                      <span className=\"w-6 h-6 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded-full flex items-center justify-center text-sm font-medium\">\n                        {index + 1}\n                      </span>\n                      <img\n                        src={product.image}\n                        alt={product.name}\n                        className=\"w-12 h-12 rounded-lg object-cover\"\n                      />\n                      <div className=\"flex-1 min-w-0\">\n                        <p className=\"font-medium text-gray-900 dark:text-white truncate\">{product.name}</p>\n                        <div className=\"flex items-center space-x-4 text-sm text-gray-600 dark:text-gray-400\">\n                          <span>${product.revenue.toLocaleString()}</span>\n                          <span>{product.orders} orders</span>\n                          <span>{product.conversion}% conv.</span>\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          </div>\n\n          {/* Customer Insights */}\n          <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm transition-colors\">\n            <div className=\"p-6 border-b border-gray-200 dark:border-gray-700\">\n              <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">Customer Insights</h3>\n            </div>\n            <div className=\"p-6 space-y-6\">\n              <div>\n                <h4 className=\"text-sm font-medium text-gray-900 dark:text-white mb-3\">Top Countries</h4>\n                <div className=\"space-y-2\">\n                  {customerInsights.topCountries.map((country, index) => (\n                    <div key={index} className=\"flex items-center justify-between p-2 rounded hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors\">\n                      <span className=\"text-sm text-gray-600 dark:text-gray-400\">{country.country}</span>\n                      <div className=\"flex items-center space-x-2\">\n                        <span className=\"text-sm font-medium text-gray-900 dark:text-white\">{country.orders}</span>\n                        <span className=\"text-xs text-gray-500 dark:text-gray-400\">${country.revenue}</span>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n\n              <div>\n                <h4 className=\"text-sm font-medium text-gray-900 dark:text-white mb-3\">Age Groups</h4>\n                <div className=\"space-y-2\">\n                  {customerInsights.ageGroups.map((group, index) => (\n                    <div key={index} className=\"flex items-center justify-between\">\n                      <span className=\"text-sm text-gray-600 dark:text-gray-400\">{group.group}</span>\n                      <div className=\"flex items-center space-x-2\">\n                        <div className=\"w-20 h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden\">\n                          <div\n                            className=\"h-2 bg-emerald-500 rounded-full transition-all duration-500\"\n                            style={{ width: `${group.percentage}%` }}\n                          ></div>\n                        </div>\n                        <span className=\"text-sm font-medium text-gray-900 dark:text-white w-10 text-right\">{group.percentage}%</span>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <Footer />\n    </div>\n  );\n}\n"],"names":["SellerAnalytics","user","useAuth","useRequireAuth","timeRange","setTimeRange","useState","activeMetric","setActiveMetric","isRealTime","setIsRealTime","lastUpdate","setLastUpdate","loading","setLoading","error","setError","analyticsData","setAnalyticsData","topProducts","setTopProducts","customerInsights","setCustomerInsights","useEffect","fetchAnalytics","profitability","buyerInsights","sellerProducts","analyticsService","productsService","revenue","orders","visitors","conversionRate","generateChartData","baseValue","days","_","i","date","variance","d","product","err","interval","currentData","exportReport","data","blob","url","a","jsxs","jsx","Header","SkeletonLoader","Footer","Link","e","Button","metric","point","index","maxValue","p","height","country","group"],"mappings":"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"}